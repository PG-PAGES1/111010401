window.__require=function e(t,n,o){function i(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var p=n[r]={exports:{}};t[r][0].call(p.exports,function(e){return i(t[r][1][e]||e)},p,p.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({Banner111010401:[function(e,t,n){"use strict";cc._RF.push(t,"71028CV1m1Anop7H3PUXVWi","Banner111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BannerWeaponEnum=n.BannerWinScoreStateEnum=n.BannerInfoEnum=void 0;var r,s,c,l=e("../common/GameEventName111010401"),p=e("../common/NumAtlasLabel111010401"),u=e("../common/ShakeScene111010401"),d=e("../common/SubQueueManager111010401"),h=e("../utils/DataUtil111010401"),f=cc._decorator,m=f.ccclass,g=f.property;(function(e){e[e.BANNER_BASE=0]="BANNER_BASE",e[e.BANNER_FREE_SPIN=1]="BANNER_FREE_SPIN",e[e.BANNER_FREE_GAME=2]="BANNER_FREE_GAME",e[e.default=3]="default"})(r=n.BannerInfoEnum||(n.BannerInfoEnum={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.NOLMAL=1]="NOLMAL",e[e.TOTAL=2]="TOTAL"}(s=n.BannerWinScoreStateEnum||(n.BannerWinScoreStateEnum={})),function(e){e[e.WEAPON_1=1]="WEAPON_1",e[e.WEAPON_2=2]="WEAPON_2",e[e.WEAPON_3=3]="WEAPON_3"}(c=n.BannerWeaponEnum||(n.BannerWeaponEnum={}));var y=function(e){function t(){var t,n=null!==e&&e.apply(this,arguments)||this;return n.banner=null,n.duration=10,n.waitDuration=2,n.startPos=0,n.bannerBGList=[],n.bannerBGNode=null,n.changeBg=null,n.bannerParent=null,n.weaponNode=null,n.weaponSke=[],n.rateLab=null,n.rateHighNode=null,n.rateHighLab=null,n.winCoinNode=null,n.winCoinParent=null,n.randomNumber=0,n.bannerInfo=[],n.bannerLabelKeyInfo=[],n.tween=null,n.isInit=!0,n.bannerData=null,n.bannerNode=null,n.configData=((t={})[c.WEAPON_1]={ani1:"ib01",ani2:"beishuxialuozhakai"},t[c.WEAPON_2]={ani1:"ib02",ani2:"beishuxialuozhakai2"},t[c.WEAPON_3]={ani1:"ib03",ani2:"beishuxialuozhakai3"},t),n.curWeapon=c.WEAPON_1,n.curIndex=r.BANNER_BASE,n}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),window.Banner111010401=this,this.bannerData=slot.GData.getParameter("banner").banner,this.bannerNode=this.banner.node,this.curIndex=r.default,game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_SLOT_BANNER_SETINFO,this.setInfo,this),game.EventManager.getInstance().addEventListener(l.EventName.EVENT_SLOT_BANNER_START,this.initBanner,this),game.EventManager.getInstance().addEventListener(l.EventName.EVENT_SLOT_BANNER_STOP,this.onStopBanner,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_BANNER_SCATTER_HIDE,this.onScatterHide,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_REEL_BEGIN,this.onReelStart,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_REEL_COMPLETE,this.onReelComplete,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_BANNER_SHOW_WIN,this.showWin,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_BANNER_CHANGE_RATE,this.changeRate,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_BANNER_UPDATE_WIN,this.updateWinCoin,this),this.initBannerNode()},t.prototype.onDestroy=function(){game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_SLOT_BANNER_SETINFO,this.setInfo,this),game.EventManager.getInstance().removeEventListener(l.EventName.EVENT_SLOT_BANNER_START,this.initBanner,this),game.EventManager.getInstance().removeEventListener(l.EventName.EVENT_SLOT_BANNER_STOP,this.onStopBanner,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_BANNER_SCATTER_HIDE,this.onScatterHide,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_REEL_BEGIN,this.onReelStart,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_REEL_COMPLETE,this.onReelComplete,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_BANNER_SHOW_WIN,this.showWin,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_BANNER_CHANGE_RATE,this.changeRate,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_BANNER_UPDATE_WIN,this.updateWinCoin,this),e.prototype.onDestroy&&e.prototype.onDestroy.call(this)},t.prototype.initBannerNode=function(){this.curWeapon=c.WEAPON_1,this.weaponSke[0].node.active=!1,this.weaponSke[1].node.active=!1,this.setWinCoinNodeActive(!1),this.bannerParent.active=!0,this.initSetInfo(),this.weaponChange(),this.rateHighNode.active=!1,this.setRateLab(1)},t.prototype.setWinCoinNodeActive=function(e){this.winCoinNode.active=e},t.prototype.setWinCoinLab=function(e,t){void 0===t&&(t=s.DEFAULT);var n=this.winCoinParent.getChildByName("totalLab"),o=this.winCoinParent.getChildByName("winLab");this.winCoinParent.getChildByName("coin").getComponent(p.default).string=slot.SlotUtils.formatNumber(e),n.active=t==s.TOTAL,o.active=t==s.NOLMAL},t.prototype.onReelStart=function(){var e=this;this.rateLab.node.active=!0,this.rateHighNode.active=!1,this.setRateLab(1),this.weaponChange(c.WEAPON_1,!0,!0,slot.Handler.create(this,function(){e.bannerParent.active=!0,e.bannerNode.active=!0,e.setWinCoinNodeActive(!1),e.setBannerDefault()}))},t.prototype.onReelComplete=function(){},t.prototype.resetUI=function(){this.setInfo(null,r.BANNER_BASE)},t.prototype.showWin=function(e,t,n,o,i){var a=this,r=h.DataUtil111010401.getWinRate(n),l=slot.Handler.create(this,function(){if(a.setWinCoinNodeActive(!0),1==t)a.bannerParent.active=!1,a.setWinCoinLab(o,s.NOLMAL);else{a.setWeaponAni();var e=o/t;slot.SoundMger.instance.playEffect("Mtp_Move"),a.setWinCoinLab(e,s.DEFAULT),a.rateFly(slot.Handler.create(a,function(){u.default.Instance.startShakeScene(),a.setWinCoinLab(o,s.NOLMAL),a.showWinCoinNode(1,!1,null)}))}}),p=c.WEAPON_1;p=r<5?c.WEAPON_1:c.WEAPON_2,this.weaponChange(p,!0,!1,l),this.showWinCoinNode(1,!1,i)},t.prototype.changeRate=function(e,t,n){void 0===n&&(n=!1);var o=this.rateHighLab.node.parent;if(o.active=!0,this.rateHighNode.active=!0,this.rateLab.node.active=!1,cc.Tween.stopAllByTarget(o),cc.Tween.stopAllByTarget(this.rateHighNode),o.scale=1,o.y=0,o.opacity=255,this.setRateLab(t),n){var i=this.rateHighNode.getChildByName("ani").getComponent(sp.Skeleton);i.node.active=!0,i.setAnimation(0,"beishuzengjia",!1),i.setCompleteListener(function(){i.setCompleteListener(null),i.node.active=!1}),cc.tween(o).to(.04,{y:5}).to(.16,{y:-3}).to(.12,{y:0}).start()}},t.prototype.rateFly=function(e){var t=this.rateHighLab.node.parent;cc.Tween.stopAllByTarget(t);var n=this.winCoinParent.convertToWorldSpaceAR(cc.v3()),o=this.rateHighNode.convertToNodeSpaceAR(n);this.rateLab.node.active=!0,t.scale=1,t.y=0,cc.tween(t).to(.36,{y:o.y}).call(function(){e&&e.run()}).to(.2,{scale:2},{easing:cc.easing.quartOut}).to(.48,{opacity:0}).start()},t.prototype.showWinCoinNode=function(e,t,n){var o=this.configData[this.curWeapon],i=this.winCoinNode.getChildByName("ani").getComponent(sp.Skeleton);i.node.active=!1,cc.Tween.stopAllByTarget(this.winCoinNode),t?this.curWeapon==c.WEAPON_2?slot.SoundMger.instance.playEffect("Textbox_021"):slot.SoundMger.instance.playEffect("Textbox_012"):slot.SoundMger.instance.playEffect("Textbox_010"),this.winCoinNode.opacity=0,this.winCoinNode.scale=1,cc.tween(this.winCoinNode).delay(.05).call(function(){t||(i.node.active=!0,i.setAnimation(0,o.ani2,!1),i.setCompleteListener(function(){i.setCompleteListener(null),i.node.active=!1}))}).set({opacity:255}).to(.068,{scale:.6*e}).to(.033,{scale:1.2*e}).to(.3,{scale:e}).call(function(){n&&n.run()}).start()},t.prototype.setRateLab=function(e){this.rateLab.string="x"+e,this.rateHighLab.string="x"+e},t.prototype.setWeaponAni=function(){var e=this,t=this.configData[this.curWeapon],n=this.weaponNode.getChildByName("l"),o=this.weaponNode.getChildByName("r");n.active=!1,o.active=!1,this.weaponSke[0].node.active=!0,this.weaponSke[0].setAnimation(0,t.ani1,!1),this.weaponSke[0].setCompleteListener(function(){e.weaponSke[0].setCompleteListener(null),n.active=!0,o.active=!0,e.weaponSke[0].node.active=!1}),this.weaponSke[1].node.active=!0,this.weaponSke[1].setAnimation(0,"ib_lighting",!1),this.weaponSke[1].setCompleteListener(function(){e.weaponSke[1].setCompleteListener(null),e.weaponSke[1].node.active=!1}),this.scheduleOnce(function(){},.56)},t.prototype.setFrameLight=function(e,t){void 0===t&&(t=1);var n=this.rateLab.node.parent.getChildByName("frameLight");if(n.active=e,e)for(var o=0;o<3;o++)n.children[o].active=t==o+1},t.prototype.updateWinCoin=function(e,t,n,o,i){var a=this;void 0===t&&(t=slot.WinAniType.None),this.bannerParent.active=!1,this.setWinCoinNodeActive(!0);var r=new d.SubQueueManager111010401;t==slot.WinAniType.Normal&&(this.showWinCoinNode(1,!0,null),r.pushToQueue(slot.Handler.create(this,this.syncWinNum,[0,n,o]))),t>slot.WinAniType.Normal&&this.weaponChange(c.WEAPON_3,o,!1),r.pushToQueue(slot.Handler.create(this,function(){a.setWinCoinLab(n,s.TOTAL),a.showWinCoinNode(1.2,!0,slot.Handler.create(a,function(){a.scheduleOnce(function(){i&&i.run()},.6)}))})),r.execute()},t.prototype.syncWinNum=function(e,t,n,o){var i=this;n?(slot.SoundMger.instance.playEffect("Textbox_Coin"),cc.tween({num:e}).to(2,{num:t},{progress:function(e,t,n,o){var a=e+(t-e)*o;i.setWinCoinLab(a,s.TOTAL)}}).call(function(){o&&o.run()}).start()):(this.setWinCoinLab(t,s.TOTAL),o&&o.run())},t.prototype.weaponChange=function(e,t,n,o){void 0===e&&(e=c.WEAPON_1),void 0===t&&(t=!1),void 0===n&&(n=!0),void 0===o&&(o=null);var i=this.curWeapon;this.curWeapon=e;var a=[],r=[];e==i&&(t=!1);var s=t&&e!=c.WEAPON_1;this.setFrameLight(!n,e);for(var l=0;l<3;l++){var p=this.weaponNode.getChildByName("l").getChildByName(""+(l+1)),u=this.weaponNode.getChildByName("r").getChildByName(""+(l+1)),d=t&&i==l+1,h=l+1==e||d;cc.Tween.stopAllByTarget(p),cc.Tween.stopAllByTarget(u),p.active=h,u.active=h,p.zIndex=h?1:0,u.zIndex=h?1:0,p.position=cc.v3(),u.position=cc.v3(),t||(p.opacity=255,u.opacity=255),d&&(a.push(p),a.push(u)),s&&(r.push(p),r.push(u))}this.bannerBGNode.spriteFrame=this.bannerBGList[e-1],this.changeBg.node.active=t,cc.Tween.stopAllByTarget(this.changeBg.node),this.changeBg.node.opacity=255;var f=0;for(s&&(f=.33),l=0;l<r.length;l++)(m=r[l]).position=cc.v3((0==l?-1:1)*(e==c.WEAPON_2?21:35),e==c.WEAPON_2?60:75),cc.tween(m).to(s?f/2:0,{position:cc.v3((0==l?1:-1)*(e==c.WEAPON_2?6:10),e==c.WEAPON_2?-20:-25)}).to(s?f/2:0,{position:cc.v3(0,0)}).start();if(t)for(f=.33,this.changeBg.spriteFrame=this.bannerBGList[i-1],cc.tween(this.changeBg.node).to(f,{opacity:0}).set({opacity:255,active:!1}).start(),l=0;l<a.length;l++){var m=a[l];cc.Tween.stopAllByTarget(m),m.opacity=255,cc.tween(m).to(f,{opacity:0}).set({opacity:255,active:!1}).start()}this.scheduleOnce(function(){o&&o.run()},f)},t.prototype.initSetInfo=function(e){var t=this;if(void 0===e&&(e=r.BANNER_BASE),this.bannerData)for(var n=function(n){var o=n.atlas?n.atlas:n.url;o=o.replace("&",slot.GData.curLanguage);var i=n.spriteFrames[e];n.atlas?game.ResLoader.getInstance().loadRes(o,cc.SpriteAtlas,function(e,n){e||t.initBannerInfo(n,i)},slot.GData.bundleName):game.ResLoader.getInstance().loadResDir(o,cc.SpriteFrame,function(e,n){e||t.initBannerInfo(n,i)},slot.GData.bundleName)},o=0,i=this.bannerData;o<i.length;o++)n(i[o]);this.curIndex=e,this.bannerParent.getChildByName("mask").active=e==r.BANNER_BASE},t.prototype.initBannerInfo=function(e,t){var n=this;if(this.bannerData[0].atlas)for(var o=0,i=t;o<i.length;o++){var a=i[o],r=e.getSpriteFrame(a);if(r)this.bannerInfo.push(r);else for(var s=0;s<a.length;s++)r=e.getSpriteFrame(a[s]),this.bannerInfo.push(r)}else{for(var c=function(t){e.forEach(function(e){e.name==t&&n.bannerInfo.push(e)})},l=0,p=t;l<p.length;l++)c(a=p[l]);if(e.length!=this.bannerInfo.length){this.bannerInfo=[];for(var u=function(t){e.forEach(function(e){for(var o=0;o<t.length;o++)e.name==t[o]&&n.bannerInfo.push(e)})},d=0,h=t;d<h.length;d++)u(a=h[d])}}this.startPlay()},t.prototype.startPlay=function(){this.onPlayBanner()},t.prototype.setInfo=function(e,t){if(this.bannerInfo=[],this.bannerLabelKeyInfo=[],t.length)for(var n=0;n<t.length;n++)this.initSetInfo(t[n]);else this.initSetInfo(t)},t.prototype.initBanner=function(){this.curIndex=r.default,this.setBannerDefault()},t.prototype.setBannerDefault=function(){this.curIndex!=r.BANNER_BASE&&this.setInfo(null,r.BANNER_BASE)},t.prototype.onPlayBanner=function(){var e=this;this.tween&&this.tween.stop(),this.bannerNode.scale=1;var t=0;if(this.bannerData.playInOrder)(t=this.randomNumber+1)>=this.bannerInfo.length&&(t=0);else if(t=Math.floor(Math.random()*this.bannerInfo.length),this.bannerInfo.length>1&&this.randomNumber==t)return void this.onPlayBanner();var n,o,i=this.bannerInfo[t];if(i)if(this.banner.spriteFrame=i,this.randomNumber=t,this.bannerNode.active=!0,o=i.getRect().width*this.bannerNode.scale,n=this.bannerNode.parent.width/2+o/2+this.startPos,o<=this.bannerNode.parent.width)this.bannerNode.setPosition(0,0),this.curIndex==r.BANNER_FREE_SPIN?(this.showBonusBanner(),this.tween=cc.tween(this.bannerNode).to(.233,{scale:1.2}).to(.1,{scale:1}).to(.233,{scale:1.2}).to(.1,{scale:1}).delay(.3).union().repeatForever().start()):this.curIndex==r.BANNER_FREE_GAME?(this.bannerNode.setPosition(0,0),this.showBonusBanner()):this.scheduleOnce(function(){e.onPlayBanner()},5);else{var a=o/2-this.bannerNode.parent.width/2+this.startPos;this.tween=cc.tween(this.bannerNode).set({position:cc.v3(a,0)}).delay(this.waitDuration).to(this.duration,{x:-n}).delay(.5).call(function(){e.onPlayBanner()}).start()}else this.onPlayBanner()},t.prototype.onScatterHide=function(){var e=this;this.curIndex==r.BANNER_FREE_SPIN&&(this.tween&&this.tween.stop(),this.tween=cc.tween(this.bannerNode).to(.3,{opacity:0}).call(function(){e.bannerNode.opacity=255,e.bannerNode.scale=1,e.bannerNode.active=!1,e.tween=null}).start())},t.prototype.showBonusBanner=function(){this.bannerParent.active=!0,this.setWinCoinNodeActive(!1)},t.prototype.onStopBanner=function(e,t){0!=t&&(slot.FreeGameManager.instance.freeGameInfo&&slot.FreeGameManager.instance.freeGameInfo.type==slot.OperationState.ReSpin||e!=slot.GameEventNames.EVENT_FREE_GAME_TRIGGERED)&&this.onStopBannerTemp()},t.prototype.onStopBannerTemp=function(){this.curIndex=r.default,this.unscheduleAllCallbacks(),this.tween&&this.tween.stop(),this.bannerNode.active=!1},a([g({type:cc.Sprite,tooltip:"\u8dd1\u9a6c\u706f\u8282\u70b9\uff08\u662fsprite\u7c7b\u578b\uff09",visible:function(){return!this.bannerLabel&&!this.bannerRichText}})],t.prototype,"banner",void 0),a([g({tooltip:"\u4ece \u8d77\u70b9\u5230\u7ec8\u70b9\u7684\u65f6\u95f4 \u5355\u4f4d\uff1a\u79d2"})],t.prototype,"duration",void 0),a([g({tooltip:"\u505c\u5728\u4e2d\u95f4\u5c55\u793a\u7684\u65f6\u95f4"})],t.prototype,"waitDuration",void 0),a([g({tooltip:"\u8d77\u59cbX\u4f4d\u7f6e\u9ed8\u8ba40"})],t.prototype,"startPos",void 0),a([g(cc.SpriteFrame)],t.prototype,"bannerBGList",void 0),a([g(cc.Sprite)],t.prototype,"bannerBGNode",void 0),a([g(cc.Sprite)],t.prototype,"changeBg",void 0),a([g(cc.Node)],t.prototype,"bannerParent",void 0),a([g(cc.Node)],t.prototype,"weaponNode",void 0),a([g(sp.Skeleton)],t.prototype,"weaponSke",void 0),a([g(p.default)],t.prototype,"rateLab",void 0),a([g(cc.Node)],t.prototype,"rateHighNode",void 0),a([g(p.default)],t.prototype,"rateHighLab",void 0),a([g(cc.Node)],t.prototype,"winCoinNode",void 0),a([g(cc.Node)],t.prototype,"winCoinParent",void 0),a([m],t)}(slot.BaseView);n.default=y,cc._RF.pop()},{"../common/GameEventName111010401":"GameEventName111010401","../common/NumAtlasLabel111010401":"NumAtlasLabel111010401","../common/ShakeScene111010401":"ShakeScene111010401","../common/SubQueueManager111010401":"SubQueueManager111010401","../utils/DataUtil111010401":"DataUtil111010401"}],BonusEndPop111010401:[function(e,t,n){"use strict";cc._RF.push(t,"0fbdbCQCzdOsbDXtYnA+/7e","BonusEndPop111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../common/NumAtlasLabel111010401"),s=e("../common/ShakeScene111010401"),c=e("../ui/GameUILogic111010401"),l=e("../utils/Util111010401"),p=cc._decorator,u=p.ccclass,d=p.property,h=p.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.doorSke=null,t.aniNode=null,t.bgSke=null,t.numEndSke=null,t.titleNode=null,t.numLab=null,t.btnNode=null,t.numAddEndBtnNode=null,t.winCoin=0,t.m_isUpdate=!1,t.m_money=1e3,t.m_speed=3,t.totalTime=4,t.completeHandler=null,t.clickHandler=null,t.bClick=!1,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),window.BonusEndPop111010401=this},t.prototype.onOpen=function(e,t){s.default.Instance.init(this.node.position,this.node),this.clickHandler=t.clickHandler,this.completeHandler=t.completeHandler,this.winCoin=t.num;var n=t.openHandler;n&&n.run(),c.default.instance.cloneScorePrefab(!1),this.initPage()},t.prototype.initPage=function(){var e=this;cc.Tween.stopAll(),this.unscheduleAllCallbacks(),cc.Tween.stopAllByTarget(this.aniNode),this.aniNode.opacity=255,this.doorSke.node.active=!1,this.bgSke.node.active=!0,this.bgSke.setAnimation(0,"tw",!0),this.numEndSke.node.active=!1,slot.SoundMger.instance.playEffect("Fsend_Role_0"+l.default.rnd(1,2)),cc.Tween.stopAllByTarget(this.titleNode),this.titleNode.scale=0,cc.tween(this.titleNode).to(.268,{scale:1.1}).to(.232,{scale:1}).start(),cc.Tween.stopAllByTarget(this.numLab.node.parent),this.numLab.node.parent.scale=0,cc.tween(this.numLab.node.parent).to(.268,{scale:1.1}).to(.232,{scale:1}).start(),this.m_money=0,this.setLab(),this.m_speed=Math.ceil(this.winCoin/(1e3*this.totalTime)),slot.SoundMger.instance.playEffect("Free_Game_Settlement"),slot.SoundMger.instance.playEffect("Settlement_End_Coin"),this.scheduleOnce(function(){e.numAddEndBtnNode.active=!0,e.m_isUpdate=!0},.133)},t.prototype.update=function(e){this.m_isUpdate&&(this.m_money<this.winCoin&&(this.m_money+=1e3*this.m_speed*e),this.m_money>=this.winCoin&&this.numAddEnd(),this.setLab())},t.prototype.setLab=function(){this.numLab.string=slot.SlotUtils.formatNumber(this.m_money)},t.prototype.numAddEnd=function(){var e=this;slot.SoundMger.instance.stopEffect("Settlement_End_Coin"),slot.SoundMger.instance.playEffect("Free_Game_Settlement_End"),this.numAddEndBtnNode.active=!1,this.m_isUpdate=!1,this.m_money=this.winCoin,this.setLab(),s.default.Instance.startShakeScene(),this.numEndSke.node.active=!0,this.numEndSke.setAnimation(0,"tw2",!1),this.btnNode.active=!0,this.bClick=!1,this.scheduleOnce(function(){e.onClick()},5)},t.prototype.onClick=function(){this.bClick||(this.bClick=!0,slot.SoundMger.instance.playEffect("Fs_Button_End"),cc.Tween.stopAll(),this.unscheduleAllCallbacks(),this.btnNode.scale=1,cc.tween(this.btnNode).to(.033,{scale:1.2}).to(.2,{scale:1}).call(function(){}).start(),this.hidePage(),this.clickHandler&&this.clickHandler.run())},t.prototype.hidePage=function(){var e=this;cc.Tween.stopAllByTarget(this.aniNode),this.aniNode.opacity=255,cc.tween(this.aniNode).to(.432,{opacity:0}).start(),cc.Tween.stopAllByTarget(this.doorSke.node),cc.tween(this.doorSke.node).delay(.3).call(function(){e.doorSke.node.active=!0,slot.SoundMger.instance.playEffect("Doors_Open"),e.doorSke.setAnimation(0,"bl_opendoor",!1)}).delay(.265).call(function(){e.closePage()}).start()},t.prototype.closePage=function(){slot.SoundMger.instance.stopEffect("Free_Game_Settlement"),slot.SoundMger.instance.stopEffect("Free_Game_Settlement_End"),slot.SoundMger.instance.playMusic("Game_Back_Music"),s.default.Instance.init(slot.MainView.instance.node.position,slot.MainView.instance.node),this.completeHandler&&this.completeHandler.run(),game.UIManager.getInstance().close(this)},t.prototype.onClose=function(){e.prototype.onClose.call(this)},a([d(sp.Skeleton)],t.prototype,"doorSke",void 0),a([d(cc.Node)],t.prototype,"aniNode",void 0),a([d(sp.Skeleton)],t.prototype,"bgSke",void 0),a([d(sp.Skeleton)],t.prototype,"numEndSke",void 0),a([d(cc.Node)],t.prototype,"titleNode",void 0),a([d(r.default)],t.prototype,"numLab",void 0),a([d(cc.Node)],t.prototype,"btnNode",void 0),a([d(cc.Node)],t.prototype,"numAddEndBtnNode",void 0),a([u,h("game/ts/bonus/BonusEndPop111010401")],t)}(slot.BaseView);n.default=f,cc._RF.pop()},{"../common/NumAtlasLabel111010401":"NumAtlasLabel111010401","../common/ShakeScene111010401":"ShakeScene111010401","../ui/GameUILogic111010401":"GameUILogic111010401","../utils/Util111010401":"Util111010401"}],BonusGameControl111010401:[function(e,t,n){"use strict";cc._RF.push(t,"3c499rqwytBiJYBAMtXcrq8","BonusGameControl111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../common/GameEventName111010401"),s=e("../common/NumAtlasLabel111010401"),c=e("../common/ShakeScene111010401"),l=e("../common/SubQueueManager111010401"),p=e("../ui/GameUILogic111010401"),u=e("../utils/DataUtil111010401"),d=e("../utils/Util111010401"),h=e("./BonusGameLogic111010401"),f=e("./BonusItemControl111010401"),m=e("./BonusTimesItem111010401"),g=cc._decorator,y=g.ccclass,v=g.property,_=g.menu,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parent=null,t.roleAni=null,t.aniNode=null,t.wildRolePrefab=null,t.kuwuLineParent=null,t.feibiaoLineParent=null,t.kuwuLinePrefab=null,t.kuwuPrefab=null,t.feibiaoLinePrefab=null,t.itemParent=null,t.itemPrefab=null,t.timsItemList=[],t.timesLab=null,t.endNode=null,t.endAboveAniSke=null,t.endMultiply=null,t.reward=0,t.wildRoleSoundIndex=-1,t.bFirstUpdate=!0,t.roleAniInterval=5,t.bRoleAni=!1,t.roleAniTime=0,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),window.BonusGameControl111010401=this},t.prototype.addEventListener=function(){e.prototype.addEventListener&&e.prototype.addEventListener.call(this),game.EventManager.getInstance().addEventListener(r.EventName.GAME_BONUS_ACTION_RESP,this.actionResp,this),game.EventManager.getInstance().addEventListener(r.EventName.GAME_BONUS_START_POP_CLOSE,this.onBonusStart,this),game.EventManager.getInstance().addEventListener(r.EventName.GAME_BONUS_TIMES_UPDATE,this.timesUpdate,this),game.EventManager.getInstance().addEventListener(r.EventName.GAME_BONUS_ADD_DUANJIAN,this.addDuanjianAni,this)},t.prototype.removeEventListener=function(){game.EventManager.getInstance().removeEventListener(r.EventName.GAME_BONUS_ACTION_RESP,this.actionResp,this),game.EventManager.getInstance().removeEventListener(r.EventName.GAME_BONUS_START_POP_CLOSE,this.onBonusStart,this),game.EventManager.getInstance().removeEventListener(r.EventName.GAME_BONUS_TIMES_UPDATE,this.timesUpdate,this),game.EventManager.getInstance().removeEventListener(r.EventName.GAME_BONUS_ADD_DUANJIAN,this.addDuanjianAni,this),e.prototype.removeEventListener&&e.prototype.removeEventListener.call(this)},t.prototype.onOpen=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.default.instance.bonusTriggeredData=this.bonusGameInfo;var o=this.bonusGameInfo.luckyGoldResultList[this.bonusGameInfo.history.length];h.default.instance.times=o.times,h.default.instance.bReconnect=this.bonusGameInfo.history.length>0,c.default.Instance.init(this.node.getChildByName("node").position,this.node.getChildByName("node")),this.initPage()},t.prototype.initPage=function(){var e=h.default.instance.bReconnect;this.parent.active=!0,cc.Tween.stopAllByTarget(this.parent),this.parent.opacity=0,this.wildRoleSoundIndex=-1;var t=slot.Handler.create(this,this.onInitGame);e?(p.default.instance.cloneScorePrefab(!0),t.run(),this.onBonusStart(),slot.SoundMger.instance.playMusic("FreeGame_Back_Music",!0)):game.UIManager.getInstance().open(r.UIID.BONUS_START_POP,t)},t.prototype.onInitGame=function(){this.parent.opacity=255,this.roleAniTime=0,this.roleAni.node.active=!1,this.bRoleAni=!1;for(var e=0;e<this.timsItemList.length;e++)this.timsItemList[e].initTimes(e,h.default.instance.times);this.setGameTimsLab();var t=this.bonusGameInfo.luckyGoldResultList[this.bonusGameInfo.history.length],n=t.gridReward,o=t.grid;for(this.itemParent.removeAllChildren(),e=0;e<36;e++){var i=cc.instantiate(this.itemPrefab);i.name="item"+e;var a=i.getComponent(f.default);this.itemParent.addChild(i);var s=e%6*i.width+i.width/2,c=-(Math.floor(e/6)*i.height+i.height/2+(e>=18?38.5:0));i.position=cc.v3(s,c),a.initItemData(r.SymbolID111010401.default,e)}for(e=0;e<n.length;e++){var l=n[e].pos,p=(a=this.getItemByPos(l),h.default.instance.getGridDataByPos(l,o)),u=Number(n[e].goldReward),d=Number(n[e].functionReward),m=d>0?d:u;a.setEndData(p.elem,m),a.setEndState(p.elem,m),a.setSymbolActive(!1),h.default.instance.bReconnect||(h.default.instance.gridRewardItemList.push(a),a.setScatterActive(!0))}},t.prototype.initMirrorList=function(e,t){for(var n=0;n<e.gridReward.length;n++){var o=e.gridReward[n].pos,i=this.getItemByPos(o);h.default.instance.addMirrorItem(i,t)}},t.prototype.getItemByPos=function(e){var t=h.default.instance.getIndex(e);return this.getChildrenByIndex(t).getComponent(f.default)},t.prototype.onBonusStart=function(){var e=this;slot.SoundMger.instance.playEffect("Fsenter_Role_0"+d.default.rnd(1,3));var t=new l.SubQueueManager111010401;if(h.default.instance.bReconnect){var n=this.bonusGameInfo.luckyGoldResultList[this.bonusGameInfo.history.length],o=n.gridReward,i=n.grid,a=null,s=null;this.initMirrorList(n,!1);for(var c=0;c<o.length;c++){var p=o[c],u=p.pos,f=i[u-1],m=Number(p.goldReward),g=Number(p.functionReward)+m,y=this.getItemByPos(u),v=Number(p.functionArg),_=v>r.SymbolID111010401.default?v:f.elem;switch(y.setEndData(_,g),y.setEndState(_,g),_){case r.SymbolID111010401.SYMBOL_BONUS_FEIBIAO:a=y;break;case r.SymbolID111010401.SYMBOL_BONUS_DUANJIAN:s=y}}t.pushToQueue(slot.Handler.create(this,this.showSpecialFeibiaoAni,[!1,a,[]])),t.pushToQueue(slot.Handler.create(this,this.showSpecialDuanjianAni,[!1,s,[]])),t.pushToQueue(slot.Handler.create(this,this.showSpecialDizengAni,[!1]))}else t.pushToQueue(slot.Handler.create(this,function(t){for(var n=0;n<h.default.instance.gridRewardItemList.length;n++){var o=h.default.instance.gridRewardItemList[n];o.setScatterActive(!1),o.showAniPlay()}e.scheduleOnce(function(){t&&t.run()},.7)}));t.pushToQueue(slot.Handler.create(this,function(t){e.scheduleOnce(function(){t&&t.run(),e.sendStartRoll()},h.default.instance.bReconnect?.7:0)})),t.execute()},t.prototype.sendStartRoll=function(){e.prototype.operate.call(this)},t.prototype.sendEndGame=function(){e.prototype.next.call(this),game.UIManager.getInstance().close(this)},t.prototype.actionResp=function(){var e=this,t=h.default.instance.resp,n=t.luckyGoldResultList[t.times];if(0==t.times)return this.reward=Number(t.allReward),void this.onGameEnd(t,t.luckyGoldResultList[t.luckyGoldResultList.length-1]);h.default.instance.times--,this.setGameTimes(),h.default.instance.times=n.times,this.bFirstUpdate=!0,h.default.instance.bDuanjian=!1;for(var o=0;o<n.gridReward.length;o++){var i=n.gridReward[o],a=i.pos,s=n.grid[a-1],c=Number(i.goldReward),l=Number(i.functionReward)+c;s.elem==r.SymbolID111010401.SYMBOL_BONUS_DUANJIAN&&(h.default.instance.bDuanjian=!0),this.getItemByPos(a).setEndData(s.elem,l)}slot.SoundMger.instance.playEffect("Fs_Rolling"),game.EventManager.getInstance().raiseEvent(r.EventName.GAME_BONUS_ROLLER_START),this.scheduleOnce(function(){e.rollEndFunc()},2.3)},t.prototype.rollEndFunc=function(){var e=this,t=h.default.instance.resp,n=t.luckyGoldResultList[t.times],o=t.luckyGoldResultList.length,i=t.times==o-1;this.initMirrorList(n,!0);for(var a=null,s=null,c=0;c<n.gridReward.length;c++){var p=n.gridReward[c],u=p.pos,d=n.grid[u-1],m=(Number(p.functionArg),Number(p.goldReward)),g=Number(p.functionReward)+m,y=this.getItemByPos(u);switch(y.setEndData(d.elem,g),d.elem){case r.SymbolID111010401.SYMBOL_BONUS_FEIBIAO:a=y;break;case r.SymbolID111010401.SYMBOL_BONUS_DUANJIAN:s=y}}var v=[];if(a||s){var _=function(t){var o=h.default.instance.gridData[t];n.grid[o-1].elem>r.SymbolID111010401.default&&v.push(e.getChildrenByIndex(t).getComponent(f.default))},E=(a||s).posIndex,S=Math.floor(E/6),A=E%6;for(c=1;c<6;c++){var N=S-c>=0,b=S+c<6,R=A-c>=0,M=A+c<6,L=N?S-c:0,I=b?S+c:5,T=R?A-c:0,O=M?A+c:5;if(cc.log("itemIndex: ",E,", itemRow: ",S,", itemCol: ",A,", i: ",c,", bTop: ",N,", bBottom: ",b,", bLeft: ",R,", bRight: ",M,", topRow: ",L,", bottomRow: ",I,", leftCol: ",T,", rightCol: ",O),N)for(var B=0;B<=O-A;B++)cc.log("\u4e0a\u9762\u7684\u53f3\u8fb9\u534a\u884c: ",E-6*c+B),_(E-6*c+B);if(M){var w=L-S+(N?1:0);for(B=w;B<=I-S;B++)cc.log("\u53f3\u8fb9\u4e00\u6574\u5217: ",w,E+6*B+c),_(E+6*B+c)}if(b)for(B=O-A-(M?1:0);B>=T-A;B--)cc.log("\u4e0b\u8fb9\u4e00\u6574\u884c: ",E+6*c+B),_(E+6*c+B);if(R)for(B=I-S-(b?1:0);B>=L-S;B--)cc.log("\u5de6\u8fb9\u4e00\u6574\u5217: ",E+6*B-c),_(E+6*B-c);if(N)for(B=T-A+(R?1:0);B<0;B++)cc.log("\u4e0a\u9762\u7684\u5de6\u8fb9\u534a\u884c: ",E-6*c+B),_(E-6*c+B)}}var C=new l.SubQueueManager111010401;C.reset(),C.pushToQueue(slot.Handler.create(this,this.showSpecialFeibiaoAni,[!0,a,v])),C.pushToQueue(slot.Handler.create(this,this.showSpecialDuanjianAni,[!0,s,v])),C.pushToQueue(slot.Handler.create(this,this.showSpecialDizengAni,[!0])),C.pushToQueue(slot.Handler.create(this,function(t){i&&e.sendStartRoll(),e.scheduleOnce(function(){i||e.sendStartRoll(),t&&t.run()},.5)})),C.execute()},t.prototype.showSpecialFeibiaoAni=function(e,t,n,o){var i=this;if(t){cc.log("\u98de\u9556(\u6536\u96c6\u5f53\u524d\u7684\u6240\u6709\u500d\u7387) : ",t);var a=new l.SubQueueManager111010401;if(e){var r=0;t.node.zIndex=999;for(var s=function(e){var o=n[e],s=o.getGoldReward(),l=r;r+=s,a.pushToQueue(slot.Handler.create(c,function(n,a,r){var s=cc.instantiate(i.feibiaoLinePrefab);s.parent=t.node3.getChildByName("feibiaoLineParent"),s.active=!0,i.scheduleOnce(function(){o.feibiaoShoot(s,t,n,a,r,e)},0)},[l,r]))},c=this,p=0;p<n.length;p++)s(p)}a.pushToQueue(slot.Handler.create(this,function(n){t.resetFeibiaoAngle(e,n)},[])),a.pushToQueue(slot.Handler.create(this,function(e){e&&e.run(),o&&o.run()},[])),a.execute()}else o&&o.run()},t.prototype.test=function(e,t){var n=cc.instantiate(this.feibiaoLinePrefab);n.parent=t.node3.getChildByName("feibiaoLineParent"),n.active=!0,e.feibiaoShoot(n,t,160,180,null,0)},t.prototype.addDuanjianAni=function(e,t){var n=cc.instantiate(this.kuwuPrefab);n.parent=this.itemParent,t.addDuanjianAni(n)},t.prototype.showSpecialDuanjianAni=function(e,t,n,o){var i=this;if(t){cc.log("\u77ed\u5251(\u5728\u573a\u6240\u6709\u5143\u7d20\u500d\u7387+1) : ",t);var a=new l.SubQueueManager111010401;if(e){a.pushToQueue(slot.Handler.create(this,function(e){t.highDuanjian(n.length),i.scheduleOnce(function(){e&&e.run()},.76)}));for(var r=function(e){var o=n[e];a.pushToQueue(slot.Handler.create(s,function(a){var r=cc.instantiate(i.kuwuLinePrefab);r.parent=i.kuwuLineParent,r.zIndex=998,r.active=!0,t.duanjianShoot(r,o,n.length-(e+1),e),i.scheduleOnce(function(){a&&a.run()},.3)}))},s=this,c=0;c<n.length;c++)r(c)}a.pushToQueue(slot.Handler.create(this,function(n){t.initDuanjian(e),n&&n.run()})),a.pushToQueue(slot.Handler.create(this,function(e){e&&e.run(),o&&o.run()})),a.execute()}else o&&o.run()},t.prototype.showSpecialDizengAni=function(e,t){var n=this;if(0!=h.default.instance.mirrorList.length){cc.log("\u9012\u589e(\u8f74\u5bf9\u79f0\u5143\u7d20\u500d\u7387+1) : ",h.default.instance.mirrorList);var o=new l.SubQueueManager111010401,i=[];h.default.instance.mirrorList.sort(function(e,t){return e.getColIndex()-t.getColIndex()});for(var a=-1,r=-1,s=[],c=0;c<h.default.instance.mirrorList.length;c++){var p=h.default.instance.mirrorList[c];null!=p.first&&null!=p.second&&(e?p.bAni?s.push(p):i.push(p):(p.first.initMirror(),p.second.initMirror()),h.default.instance.mirrorList[c].bAni=!0)}if(s.length>0){for(c=0;c<this.itemParent.children.length;c++){var u=this.getChildrenByIndex(c).getComponent(f.default),d=h.default.instance.getMirrorData(u);u.stopRoll&&(!h.default.instance.checkMirror(u)||i.indexOf(d)>=0)&&u.setMultiplyLight(f.BonusMultiplyLightState.STAY_DIM)}var m=function(e){var t=s[e],n=t.getColIndex();n>r&&(r=n,a++),g.scheduleOnce(function(){slot.SoundMger.instance.playEffect("Fs_Mtp_Add"),t.first.addMultipleAniPlay(),t.second.addMultipleAniPlay()},.5*a+.333)},g=this;for(c=0;c<s.length;c++)m(c)}o.pushToQueue(slot.Handler.create(this,function(t){n.scheduleOnce(function(){t&&t.run()},e?.5*a+(s.length>0?.333:0):0)})),o.pushToQueue(slot.Handler.create(this,function(e){for(var t=0;t<i.length;t++){var o=i[t];n.dizengItemChangeAni(o)}n.scheduleOnce(function(){e&&e.run()},i.length>0?2.4:0)})),o.pushToQueue(slot.Handler.create(this,function(){t&&t.run()})),o.execute()}else t&&t.run()},t.prototype.dizengItemChangeAni=function(e){var t=this,n=e.first,o=e.second;n.highMirror(!0,o),o.highMirror(!1,n),this.scheduleOnce(function(){slot.SoundMger.instance.playEffect("Wild_Appear"),t.wildRoleSoundIndex++,t.wildRoleSoundIndex>5&&(t.wildRoleSoundIndex=1),slot.SoundMger.instance.playEffect("Wild_Role_0"+t.wildRoleSoundIndex),t.showWildRole(n,o,slot.Handler.create(t,function(){slot.SoundMger.instance.playEffect("Wild_Aim"),o.addMultipleAniPlay(),n.mirrorEndAni(),o.mirrorEndAni()})),n.addMultipleAniPlay()},.833)},t.prototype.showWildRole=function(e,t,n){var o=cc.instantiate(this.wildRolePrefab);o.parent=this.aniNode,o.active=!0;var i=o.getComponentInChildren(cc.MotionStreak),a=o.getChildByName("img"),r=o.getChildByName("dust").getComponent(cc.Animation),s=this.aniNode.convertToNodeSpaceAR(e.node3.convertToWorldSpaceAR(cc.v3())),c=this.aniNode.convertToNodeSpaceAR(t.node3.convertToWorldSpaceAR(cc.v3())),l=e.posIndex>=18,p=(e.node.height+38.5)/.135,u=Math.abs(Math.abs(t.node.y)-Math.abs(e.node.y));a.active=!0,r.node.active=!1,r.node.angle=l?0:-180,o.angle=l?0:180,o.position=s,cc.tween(o).call(function(){i.reset();var e=cc.mat4(),t=i.node.getWorldMatrix(e),n=t.m[12],o=t.m[13];i._lastWPos.x=n,i._lastWPos.y=o}).to(u/p,{position:c}).call(function(){n&&n.run(),a.active=!1,r.node.active=!0,r.play(),r.once(cc.Animation.EventType.FINISHED,function(){o.removeFromParent(),o.active=!1})}).start()},t.prototype.onGameEnd=function(t,n){var o=this;cc.log("linkwin \u7ed3\u675f");var i=[].concat(n.gridReward);i.sort(function(e,t){var n=o.getItemByPos(e.pos),i=o.getItemByPos(t.pos);return n.posIndex<18||i.posIndex<18?n.posIndex-i.posIndex:i.posIndex-n.posIndex});var a=this.endMultiply.node.convertToWorldSpaceAR(cc.v3()),c=0,u=new l.SubQueueManager111010401;slot.SoundMger.instance.playEffect("Times_Exhausted"),slot.SoundMger.instance.stopMusic("FreeGame_Back_Music");for(var d=function(e){var t=i[e],r=t.pos,s=(n.grid[r-1],Number(t.functionArg),Number(t.goldReward)),l=Number(t.functionReward);c+=l+s;var p=h.getItemByPos(r);p.setMultiplyLight(f.BonusMultiplyLightState.STAY_HIGH),cc.tween(h.node).by(5,{scale:.1}).union().repeatForever().tag(999).start(),u.pushToQueue(slot.Handler.create(h,function(t,n){p.node.zIndex=999,0==e?o.scheduleOnce(function(){p.onCollect(a,e,slot.Handler.create(o,function(){o.showEndMultiply(t),n.run(),p.node.zIndex=0}))},.333):p.onCollect(a,e,slot.Handler.create(o,function(){o.endMultiplyAni(t),n.run(),p.node.zIndex=0}))},[c]))},h=this,m=0;m<i.length;m++)d(m);u.pushToQueue(slot.Handler.create(this,function(){o.endAboveAniSke.node.active=!0,o.endAboveAniSke.setCompleteListener(function(){o.endAboveAniSke.setCompleteListener(null),o.endAboveAniSke.node.active=!1}),o.endAboveAniSke.setAnimation(0,"zhakai2",!1),cc.tween(o.endMultiply.node);var t=o.endMultiply.node.position;o.endMultiply.node.position=t,cc.Tween.stopAllByTag(999),cc.tween(o.endMultiply.node).to(.05,{position:cc.v3(t.x+5,t.y-5)}).to(.06,{position:cc.v3(t.x-4.5,t.y+4.5)}).to(.07,{position:cc.v3(t.x+4,t.y-4)}).to(.08,{position:cc.v3(t.x-3.5,t.y+3.5)}).to(.09,{position:cc.v3(t.x+3,t.y-3)}).to(.1,{position:cc.v3(t.x-2.5,t.y+2.5)}).to(.11,{position:cc.v3(t.x-1,t.y)}).to(.12,{position:t}).call(function(){}).start();var n=o.endNode.getChildByName("flyNum");n.getChildByName("bet").getComponent(s.default).string=slot.SlotUtils.formatNumber(slot.SpinManager.instance.betCost),slot.SoundMger.instance.playEffect("Collect_Complete");var i=slot.ScoreBase.instance.betScore.node.convertToWorldSpaceAR(cc.v3()),a=o.endNode.convertToNodeSpaceAR(cc.v3(i.x,0));n.active=!0,cc.Tween.stopAllByTarget(n);var c=o.endMultiply.node.convertToWorldSpaceAR(cc.v3()),l=o.endNode.convertToNodeSpaceAR(c);n.position=a,n.scale=1,cc.tween(n).parallel(cc.tween(n).to(.7,{position:l}),cc.tween(n).to(.2,{scale:2})).call(function(){game.UIManager.getInstance().open(r.UIID.BONUS_END_POP,{num:o.reward,openHandler:slot.Handler.create(o,function(){o.node.scale=1}),clickHandler:slot.Handler.create(o,function(){o.node.opacity=0,game.EventManager.getInstance().raiseEvent(r.EventName.GAME_BANNER_UPDATE_WIN,p.default.instance.getWinAniType(o.reward),o.reward,!0,null)}),completeHandler:slot.Handler.create(o,function(){e.prototype.next.call(o)})})}).start()})),u.execute()},t.prototype.endMultiplyAni=function(e){var t=this;cc.Tween.stopAllByTarget(this.endMultiply.node),cc.tween(this.endMultiply.node).call(function(){t.endMultiply.string=u.DataUtil111010401.getWinRate(e)+"x"}).to(.2/.3*(1.2-this.endMultiply.node.scale),{scale:1.2}).to(.3,{scale:1}).start()},t.prototype.showEndMultiply=function(e){var t=this;this.endNode.active=!0,cc.Tween.stopAllByTarget(this.endMultiply.node),this.endMultiply.node.scale=1.2,cc.tween(this.endMultiply.node).call(function(){t.endMultiply.string=u.DataUtil111010401.getWinRate(e)+"x"}).to(.3,{scale:1}).start()},t.prototype.timesUpdate=function(){this.bFirstUpdate&&(this.bFirstUpdate=!1,this.setGameTimes())},t.prototype.setGameTimes=function(){var e=h.default.instance.times;e<=0&&(e=0);for(var t=function(t){var o=n.timsItemList[t];n.scheduleOnce(function(){o.setActive(e)},.1*t)},n=this,o=0;o<this.timsItemList.length;o++)t(o);this.setGameTimsLab()},t.prototype.setGameTimsLab=function(){this.timesLab.string=h.default.instance.times+""},t.prototype.update=function(e){var t=this;if(!this.bRoleAni&&(this.roleAniTime+=e,this.roleAniTime>=this.roleAniInterval)){this.roleAniTime=0,this.bRoleAni=!0,this.roleAni.node.active=!0;var n=this.roleAni.getClips();this.roleAni.play(n[d.default.rnd(0,n.length-1)].name),this.roleAni.once(cc.Animation.EventType.FINISHED,function(){t.roleAni.node.active=!1,t.bRoleAni=!1})}},t.prototype.getChildrenByIndex=function(e){return this.itemParent.getChildByName("item"+e)},a([v(cc.Node)],t.prototype,"parent",void 0),a([v(cc.Animation)],t.prototype,"roleAni",void 0),a([v(cc.Node)],t.prototype,"aniNode",void 0),a([v({type:cc.Node,tooltip:"\u8f74\u5bf9\u79f0\u5143\u7d20\u8f6c\u6362\u52a8\u6548"})],t.prototype,"wildRolePrefab",void 0),a([v(cc.Node)],t.prototype,"kuwuLineParent",void 0),a([v(cc.Node)],t.prototype,"feibiaoLineParent",void 0),a([v(cc.Node)],t.prototype,"kuwuLinePrefab",void 0),a([v(cc.Node)],t.prototype,"kuwuPrefab",void 0),a([v(cc.Node)],t.prototype,"feibiaoLinePrefab",void 0),a([v(cc.Node)],t.prototype,"itemParent",void 0),a([v(cc.Prefab)],t.prototype,"itemPrefab",void 0),a([v(m.default)],t.prototype,"timsItemList",void 0),a([v(s.default)],t.prototype,"timesLab",void 0),a([v(cc.Node)],t.prototype,"endNode",void 0),a([v(sp.Skeleton)],t.prototype,"endAboveAniSke",void 0),a([v(s.default)],t.prototype,"endMultiply",void 0),a([y,_("game/ts/bonus/BonusGameControl111010401")],t)}(slot.AbstractBonusGameView);n.default=E,cc._RF.pop()},{"../common/GameEventName111010401":"GameEventName111010401","../common/NumAtlasLabel111010401":"NumAtlasLabel111010401","../common/ShakeScene111010401":"ShakeScene111010401","../common/SubQueueManager111010401":"SubQueueManager111010401","../ui/GameUILogic111010401":"GameUILogic111010401","../utils/DataUtil111010401":"DataUtil111010401","../utils/Util111010401":"Util111010401","./BonusGameLogic111010401":"BonusGameLogic111010401","./BonusItemControl111010401":"BonusItemControl111010401","./BonusTimesItem111010401":"BonusTimesItem111010401"}],BonusGameLogic111010401:[function(e,t,n){"use strict";cc._RF.push(t,"f48f6EU8dJO4bNWLz/3lCzQ","BonusGameLogic111010401"),Object.defineProperty(n,"__esModule",{value:!0}),n.BonusMirrorData111010401=void 0;var o=e("../common/GameEventName111010401"),i=e("../ui/Banner111010401"),a=e("../ui/GameUILogic111010401"),r=function(){function e(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),this.first=null,this.second=null,this.bAni=!1,this.playing=!1,this.first=e,this.second=t,this.bAni=n}return e.prototype.getColIndex=function(){return this.first.posIndex%6},e}();n.BonusMirrorData111010401=r;var s=function(){function e(){this.gridRewardItemList=[],this.bonusTriggeredData=null,this.resp=null,this.times=3,this.bReconnect=!1,this.mirrorList=[],this.bDuanjian=!1,this.gridData=[1,4,7,10,13,16,2,5,8,11,14,17,3,6,9,12,15,18,19,22,25,28,31,34,20,23,26,29,32,35,21,24,27,30,33,36],this.test=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(){window.BonusGameLogic111010401=this,this.addEventListener()},e.prototype.addEventListener=function(){game.EventManager.getInstance().addEventListener(o.EventName.BONUS_GAME_TRIGGERED,this.onBonusGameTriggered,this),game.EventManager.getInstance().addEventListener(o.EventName.BONUS_GAME_OVER,this.onBonusGameOver,this),game.EventManager.getInstance().addEventListener(slot.NetSlotConst.LGACTIONRESP,this.actionResp,this),game.EventManager.getInstance().addEventListener(slot.NetSlotConst.LGDATARESP,this.BonusGameInfoResp,this)},e.prototype.removeEventListener=function(){game.EventManager.getInstance().removeEventListener(o.EventName.BONUS_GAME_TRIGGERED,this.onBonusGameTriggered,this),game.EventManager.getInstance().removeEventListener(o.EventName.BONUS_GAME_OVER,this.onBonusGameOver,this),game.EventManager.getInstance().removeEventListener(slot.NetSlotConst.LGACTIONRESP,this.actionResp,this),game.EventManager.getInstance().removeEventListener(slot.NetSlotConst.LGDATARESP,this.BonusGameInfoResp,this)},e.prototype.onBonusGameTriggered=function(e,t,n){var r=Number(t.bonusGameId),s=a.default.instance.gameID;switch(cc.log("\u89e6\u53d1\u4e86\u5c0f\u6e38\u620f---onBonusGameTriggered",t,", gameID: ",r,", curGameID: ",s),this.mirrorList=[],this.gridRewardItemList=[],this.bonusTriggeredData=null,this.resp=null,this.times=3,this.bReconnect=!1,r){case Number(s+o.GameID111010401.BONUS):var c=slot.SpinManager.instance.rollingResult.updateList[0].value.handleState.game_10017.data.resultList,l=c[c.length-1].spinResult.gridChanged;slot.SoundMger.instance.playEffect("Fs_Trigger"),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_SLOT_BANNER_SETINFO,i.BannerInfoEnum.BANNER_FREE_GAME);for(var p=0;p<l.length;p++)l[p]==o.SymbolID111010401.SYMBOL_SCATTER&&slot.SlotMachineView.instance.scroller.renders[p].scatterWinAni();setTimeout(function(){n.runWith(!0)},1e3)}},e.prototype.onBonusGameOver=function(e,t,n){var i=Number(t.bonusGameId),r=a.default.instance.gameID;switch(cc.log("\u5c0f\u6e38\u620f\u7ed3\u675f----onBonusGameOver",t,", gameID: ",i,", curGameID: ",r),i){case Number(r+o.GameID111010401.BONUS):n&&n.run()}},e.prototype.actionResp=function(e,t){var n=a.default.instance.gameID;Number(t.lgId)==Number(n+o.GameID111010401.BONUS)&&(cc.log("\u5c0f\u6e38\u620f\u7684\u64cd\u4f5c\u8fd4\u56de\u7ed3\u679c-------------",t),this.resp=t,game.EventManager.getInstance().raiseEvent(o.EventName.GAME_BONUS_ACTION_RESP))},e.prototype.BonusGameInfoResp=function(e,t){var n=a.default.instance.gameID;Number(t.lgId)==Number(n+o.GameID111010401.BONUS)&&cc.log("______\u5c0f\u6e38\u620f\u8fd4\u56de\u6570\u636e:",e,"BonusGameInfoResp",t)},e.prototype.getGridDataByPos=function(e,t){for(var n=0;n<t.length;n++)if(t[n].pos==e)return t[n]},e.prototype.checkMirrorFirst=function(e){for(var t=!0,n=0;n<this.mirrorList.length;n++){var o=this.mirrorList[n],i=o.first,a=o.second;i!=e&&a!=e||(t=!1)}return t},e.prototype.getMirrorData=function(e){for(var t=null,n=0;n<this.mirrorList.length;n++){var o=this.mirrorList[n],i=o.first,r=a.default.instance.getMirrorIndex(i.posIndex);if(i.posIndex==e.posIndex||r==e.posIndex){t=o;break}}return t},e.prototype.checkMirror=function(e){var t=!1,n=this.getMirrorData(e);return n&&(n.first&&n.second||!n.second&&n.first!=e)&&(t=!0),t},e.prototype.addMirrorItem=function(e,t){void 0===t&&(t=!0);var n=this.getMirrorData(e);return n?n.first.posIndex==e.posIndex||n.second||(n.second=e,n.bAni=!t):(n=new r(e),this.mirrorList.push(n)),n},e.prototype.getIndex=function(e){return this.gridData.indexOf(e)},e._instance=null,e}();n.default=s,cc._RF.pop()},{"../common/GameEventName111010401":"GameEventName111010401","../ui/Banner111010401":"Banner111010401","../ui/GameUILogic111010401":"GameUILogic111010401"}],BonusItemControl111010401:[function(e,t,n){"use strict";cc._RF.push(t,"7f509Bq8iVJ1pU03I06JhzX","BonusItemControl111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.BonusMultiplyLightState=void 0;var r,s=e("../common/GameEventName111010401"),c=e("../common/NumAtlasLabel111010401"),l=e("../common/ShakeScene111010401"),p=e("../utils/DataUtil111010401"),u=e("../utils/Util111010401"),d=e("./BonusGameLogic111010401"),h=cc._decorator,f=h.ccclass,m=h.property,g=h.menu;(function(e){e[e.HIDE=0]="HIDE",e[e.STAY_DIM=1]="STAY_DIM",e[e.STAY_HIGH=2]="STAY_HIGH",e[e.GAME_END=3]="GAME_END"})(r=n.BonusMultiplyLightState||(n.BonusMultiplyLightState={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roleMask=null,t.roleBg=null,t.node1=null,t.node2=null,t.node3=null,t.scatterNode=null,t.height=116,t.times=.35,t.roleBgpos=0,t.endPosy=0,t.stopRoll=!1,t.isLocal=!1,t.nextLocal=!1,t.rollIndex=4,t.curRollIndex=0,t.goldReward=0,t.endNum=0,t.posIndex=-1,t.elem=s.SymbolID111010401.default,t.duanjianNode=null,t.bMultiplyHigh=!0,t}return i(t,e),t.prototype.getGoldReward=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=d.default.instance.bDuanjian?1*slot.SpinManager.instance.betCost:0,o=slot.SpinManager.instance.betCost*(d.default.instance.checkMirror(this)?1:0);return this.goldReward-(e?0:n)-(t?0:o)},t.prototype.onLoad=function(){this.roleBgpos=-this.height/2,this.stopRoll=!1,this.isLocal=!1,this.nextLocal=!1,this.curRollIndex=0,this.endNum=0,this.goldReward=0,this.posIndex=-1},t.prototype.start=function(){},t.prototype.onEnable=function(){game.EventManager.getInstance().addEventListener(s.EventName.GAME_BONUS_ROLLER_START,this.setNodeRoll,this)},t.prototype.onDisable=function(){game.EventManager.getInstance().removeEventListener(s.EventName.GAME_BONUS_ROLLER_START,this.setNodeRoll,this)},t.prototype.setNodeRoll=function(){var e=this,t=d.default.instance.gridData[this.posIndex],n=Math.floor((t-1)/3),o=n<=5?this.rollIndex:Math.floor(1.463/(.83/this.rollIndex));this.endPosy=-(3*this.height+this.height/2),this.stopRoll?this.setMultiplyLight(r.STAY_HIGH):this.isLocal||(this.setSymbolActive(!0),this.scheduleOnce(function(){e.setRandomNodeShow(!0),e.tw=cc.tween(e.roleBg).to((n<=5?.83:1.463)/o,{position:cc.v3(0,e.endPosy)}).call(function(){e.isLocal=e.nextLocal,e.curRollIndex++,e.roleBg.position=cc.v3(0,e.roleBgpos),e.curRollIndex==o-1?(e.setEndTempShow(),e.tw.start()):e.curRollIndex>=o?(e.curRollIndex=0,e.stopTargetRoll()):(e.setRandomNodeShow(!1),e.tw.start())}).start()},0==this.curRollIndex?[0,.1,.133,.233,.3,.333,0,.1,.133,.233,.3,.333][n]:0))},t.prototype.setEndTempShow=function(){this.onSetNum(this.node3,this.elem,this.goldReward,!0),this.onSetNum(this.node2),this.onSetNum(this.node1)},t.prototype.stopTargetRoll=function(){var e=this;this.elem>s.SymbolID111010401.default&&(this.stopRoll=!0,this.scheduleOnce(function(){if(e.setSymbolActive(!1),game.EventManager.getInstance().raiseEvent(s.EventName.GAME_BONUS_TIMES_UPDATE),e.elem==s.SymbolID111010401.SYMBOL_BONUS_DUANJIAN)slot.SoundMger.instance.playEffect("Sword"),game.EventManager.getInstance().raiseEvent(s.EventName.GAME_BONUS_ADD_DUANJIAN,e);else if(e.elem==s.SymbolID111010401.SYMBOL_BONUS_FEIBIAO)slot.SoundMger.instance.playEffect("Darts"),e.highFeibiao();else{e.bMultiplyHigh=!0,e.setAboveAni("beishu_start",!1),e.setBelowAni("beishu_idle",!1);var t=e.node3.getChildByName("belowAni");slot.SoundMger.instance.playEffect("Fs_Retrigger_02"),cc.tween(t).to(.3,{opacity:255}).delay(.46).to(.3,{opacity:0}).start(),e.setMultiplyLight(r.STAY_HIGH)}},.25))},t.prototype.setSymbolActive=function(e){this.roleMask.enabled=e;for(var t=0;t<this.roleBg.children.length;t++){var n=this.roleBg.children[t];n.active=e||n==this.node3}},t.prototype.setRandomNodeShow=function(e){var t=[-1,0,1,2][u.default.rnd(0,e?2:3)],n=0,o=[this.node1,this.node2,this.node3],i=u.default.rnd(0,100)<=95?s.SymbolID111010401.SYMBOL_BONUS_DEFAULT:0==u.default.rnd(0,1)?s.SymbolID111010401.SYMBOL_BONUS_FEIBIAO:s.SymbolID111010401.SYMBOL_BONUS_DUANJIAN;i==s.SymbolID111010401.SYMBOL_BONUS_DEFAULT&&(n=u.default.rnd(1,9)*slot.SpinManager.instance.betCost);for(var a=0;a<o.length;a++){var r=o[a];a==t?this.onSetNum(r,i,n):this.onSetNum(r)}},t.prototype.initItemData=function(e,t,n){void 0===n&&(n=0),t>=0&&null!=t&&(this.posIndex=t),this.setEndData(e,n),this.setEndState(e,n)},t.prototype.setEndData=function(e,t){void 0===t&&(t=0),this.elem=e,this.goldReward=t},t.prototype.setEndState=function(e,t){void 0===t&&(t=0),this.onSetNum(this.node3,e,t,!0),this.elem>s.SymbolID111010401.default&&(this.stopRoll=!0)},t.prototype.onSetNum=function(e,t,n,o){void 0===t&&(t=s.SymbolID111010401.default),void 0===n&&(n=0),void 0===o&&(o=!1);var i=e.getChildByName("icon"),a=i.children,r=i.getChildByName(s.SymbolID111010401.default+""),l=e.getChildByName("belowAni").getComponent(sp.Skeleton),u=e.getChildByName("multiplyNode"),h=this.node3.getChildByName("multiplyTemp"),f=h.getChildByName("multiply").getComponent(c.default),m=u.getChildByName("multiply").getComponent(c.default),g=e.getChildByName("aboveAni").getComponent(sp.Skeleton);cc.Tween.stopAllByTarget(u),u.position=cc.v3(),u.opacity=255,h.active=!1;var y=this.node3.getChildByName("light");y.position=cc.v3(),l.node.active=!1,g.node.active=!1;for(var v=0;v<a.length;v++)a[v].active=!1;var _=p.DataUtil111010401.getWinRate(n),E=d.default.instance.checkMirror(this)?1:0,S=d.default.instance.bDuanjian?1:0,A=_-(o?E+S:0);switch(o&&t>0&&(cc.log(d.default.instance.bDuanjian,_,E,S,A),y.scale=1),r.active=t==s.SymbolID111010401.default,i.getChildByName(s.SymbolID111010401.SYMBOL_BONUS_DEFAULT+"").active=t!=s.SymbolID111010401.default,u.active=t==s.SymbolID111010401.SYMBOL_BONUS_DEFAULT,m.string=A+"x",f.string=_+"x",t){case s.SymbolID111010401.default:break;case s.SymbolID111010401.SYMBOL_BONUS_DEFAULT:d.default.instance.checkMirror(this)&&(i.getChildByName(s.SymbolID111010401.SYMBOL_BONUS_MIRROR+"").active=!1);break;case s.SymbolID111010401.SYMBOL_BONUS_FEIBIAO:var N=i.getChildByName(s.SymbolID111010401.SYMBOL_BONUS_FEIBIAO+"");N.active=!0,N.opacity=200;break;case s.SymbolID111010401.SYMBOL_BONUS_DUANJIAN:var b=i.getChildByName(s.SymbolID111010401.SYMBOL_BONUS_DUANJIAN+"");b.active=!0,b.opacity=255}},t.prototype.initDefault=function(){this.node3.getChildByName("icon").getChildByName(s.SymbolID111010401.SYMBOL_BONUS_DEFAULT+"")},t.prototype.highFeibiao=function(){var e=this;this.scheduleOnce(function(){e.setBelowAni("shouji",!0)},.4),this.setAboveAni("beishu_start",!1);var t=this.node3.getChildByName("icon").getChildByName(s.SymbolID111010401.SYMBOL_BONUS_FEIBIAO+"");cc.Tween.stopAllByTarget(t),this.setMultiplyLight(r.STAY_HIGH),cc.tween(t).by(2,{angle:-360}).repeatForever().start()},t.prototype.feibiaoShoot=function(e,t,n,o,i,a){var r=e.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v3())),s=e.parent.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(cc.v3())),c=this.node3.getChildByName("multiplyNode"),p=u.default.getDistance(r,s),d=u.default.getAngle(r,s),h=e.getChildByName("line"),f=e.getChildByName("particle"),m=this.getMaxLineIndex(t),g=f.getChildByName("1");g=1==m?f.getChildByName("1"):2==m?f.getChildByName("2"):3==m?f.getChildByName("3"):f.getChildByName("4"),h.opacity=255,cc.Tween.stopAllByTarget(c);var y=a+1;y>7&&(y=7),this.scheduleOnce(function(){slot.SoundMger.instance.playEffect("Darts_Count_0"+y)},.35),c.scale=1,c.position=cc.v3(),cc.tween(c).to(.12,{scale:1.2}).delay(.2).to(.12,{scale:1}).start(),e.position=r,e.angle=d,e.width=0,h.opacity=255,cc.tween(e).delay(.12).call(function(){g.active=!0;var t=g.getComponent(cc.Animation);t.play(),t.once(cc.Animation.EventType.FINISHED,function(){e.removeFromParent(),e.active=!1})}).to(p/1500,{width:p}).call(function(){i&&i.run(),l.default.Instance.startShakeScene(),t.multiplyAni(n,o,!0),cc.tween(h).to(.24,{opacity:0}).start()}).call(function(){}).start()},t.prototype.getMaxLineIndex=function(e){var t=Math.floor(this.posIndex/6),n=this.posIndex%6,o=Math.floor(e.posIndex/6),i=e.posIndex%6,a=Math.abs(t-o),r=Math.abs(n-i);return Math.max(a,r)},t.prototype.resetFeibiaoAngle=function(e,t){var n=this.node3.getChildByName("icon").getChildByName(s.SymbolID111010401.SYMBOL_BONUS_FEIBIAO+""),o=360+n.angle%360;cc.Tween.stopAllByTarget(n);var i=e?o/360:0;cc.tween(n).by(i,{angle:-o}).call(function(){n.opacity=120,t&&t.run()}).start(),e?this.setBelowAni("zhakai2",!1):this.multiplyAni(0,this.getGoldReward(!0,!0),!1),this.bMultiplyHigh=!0,this.setMultiplyLight(r.STAY_HIGH)},t.prototype.initDuanjian=function(e){void 0===e&&(e=!1),this.duanjianNode&&(this.duanjianNode.removeFromParent(),this.duanjianNode.active=!1,this.duanjianNode=null),this.multiplyAni(this.getGoldReward(),this.getGoldReward(!0),e),this.bMultiplyHigh=!0,this.setMultiplyLight(r.STAY_HIGH);var t=this.node3.getChildByName("icon").getChildByName(s.SymbolID111010401.SYMBOL_BONUS_DUANJIAN+"");t.active=!0,t.opacity=120},t.prototype.addDuanjianAni=function(e){var t=this.node3.getChildByName("icon").getChildByName(s.SymbolID111010401.SYMBOL_BONUS_DUANJIAN+"");this.scheduleOnce(function(){t.active=!1}),e.zIndex=999,e.angle=-60,e.position=this.node.position,this.duanjianNode=e,e.active=!0,e.getChildByName("bg").active=!0;var n=e.getComponentInChildren(sp.Skeleton);n.node.active=!0,n.setAnimation(0,"beishu_start",!1),n.setCompleteListener(function(){n.setCompleteListener(null),n.node.active=!1})},t.prototype.highDuanjian=function(e){var t=this.duanjianNode,n=t.getComponentInChildren(sp.Skeleton);n.node.active=!0,this.updateDuanjianCount(e),n.setAnimation(0,"fashe",!0),t.getComponent(cc.Animation).play("kuwuShowAni"),slot.SoundMger.instance.playEffect("Sword_Expand")},t.prototype.duanjianShoot=function(e,t,n,o){var i=e.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.v3())),a=e.parent.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(cc.v3())),r=u.default.getDistance(i,a),s=u.default.getAngle(i,a);e.position=i,e.angle=s,this.duanjianNode.angle=-90+s,this.updateDuanjianCount(n);var c=o+1;c>7&&(c=7),this.scheduleOnce(function(){slot.SoundMger.instance.playEffect("Sword_Add_0"+c)},.3),e.width=0,e.opacity=255,this.duanjianNode.getComponent(cc.Animation).play("kuwuEndAni"),cc.tween(e).to(r/1500,{width:r}).set({opacity:150}).call(function(){l.default.Instance.startShakeScene(),t.setAboveAni("zengjia");var e=t.getGoldReward(!0),n=t.getGoldReward();t.multiplyAni(n,e,!0)}).to(.3,{opacity:0}).call(function(){e.removeFromParent(),e.active=!1}).start()},t.prototype.updateDuanjianCount=function(e){for(var t=this.duanjianNode,n=1;n<5;n++)t.getChildByName("parent").getChildByName("item"+n).active=e>=n},t.prototype.setMultiplyLight=function(e){var t=this.node3.getChildByName("guang"),n=this.node3.getChildByName("light"),o=this.node3.getChildByName("icon").getChildByName(s.SymbolID111010401.SYMBOL_BONUS_DEFAULT+""),i=o.getChildByName("img"),a=o.getChildByName("mask"),c=this.node3.getChildByName("multiplyNode");cc.Tween.stopAllByTarget(t),cc.Tween.stopAllByTarget(n),cc.Tween.stopAllByTarget(i),n.active=!0,i.active=!0,t.active=!1,t.opacity=60,a.opacity=e==r.GAME_END?0:255,e==r.STAY_DIM?(t.active=!0,this.bMultiplyHigh=!0,cc.tween(n).to(.333,{opacity:80}).start(),cc.tween(i).to(.333,{opacity:150}).start(),c.opacity=180):r.STAY_HIGH&&this.bMultiplyHigh&&(t.active=!1,this.bMultiplyHigh=!1,cc.tween(n).to(.333,{opacity:150}).start(),cc.tween(i).to(.333,{opacity:255}).start(),c.opacity=255)},t.prototype.initMirror=function(){var e=cc.find("icon/"+s.SymbolID111010401.SYMBOL_BONUS_MIRROR,this.node3);e.active=!0;for(var t=0;t<e.children.length;t++)e.children[t].active=!1;e.getChildByName("idle").active=!0,e.getChildByName("img").active=!0,this.node3.getChildByName("light").scale=0,this.multiplyAni(0,this.goldReward,!1)},t.prototype.highMirror=function(e,t){var n=this,o=cc.find("icon/"+s.SymbolID111010401.SYMBOL_BONUS_MIRROR,this.node3);o.active=!0;for(var i=0;i<o.children.length;i++)o.children[i].active=!1;var a=this.posIndex<18,r=o.getChildByName("top"),c=r.getChildByName("line"),l=o.getChildByName("bottom"),p=o.getChildByName("light"),d=o.getChildByName("ske").getComponent(sp.Skeleton);o.getChildByName("idle").active=!1,o.getChildByName("img").active=!1,r.active=a,l.active=!a;var h=u.default.getDistance(cc.v3(this.node.position.x,this.node.position.y+(a?1:-1)*this.height/2),cc.v3(t.node.position.x,t.node.position.y+(a?-1:1)*t.height/2));a&&(c.height=h),cc.Tween.stopAllByTarget(r),cc.Tween.stopAllByTarget(l),cc.Tween.stopAllByTarget(p),cc.Tween.stopAllByTarget(d.node),e&&(d.node.active=!0,d.node.scale=0,d.node.opacity=120,cc.tween(d.node).to(.3,{scale:.695}).call(function(){e&&n.setAboveAni("zhakai2")}).to(.2,{opacity:255}).start());var f=a?r:l;f.opacity=0,cc.tween(f).to(.5,{opacity:255}).start()},t.prototype.mirrorEndAni=function(){var e=cc.find("icon/"+s.SymbolID111010401.SYMBOL_BONUS_MIRROR,this.node3),t=e.getChildByName("top"),n=e.getChildByName("bottom"),o=(e.getChildByName("light"),this.posIndex<18?t:n);o.opacity=255,cc.tween(o).to(.5,{opacity:0}).start()},t.prototype.showMirror=function(){},t.prototype.showAniPlay=function(){this.setEndTempShow(),this.bMultiplyHigh=!0,this.setMultiplyLight(r.STAY_HIGH),this.setBelowAni("zhakai2");var e=this.node3.getChildByName("multiplyNode");e.active=!0,cc.Tween.stopAllByTarget(e),slot.SoundMger.instance.playEffect("freeStartSymEffct"),cc.tween(e).to(.1,{scale:1.2}).to(.168,{scale:1}).start()},t.prototype.addMultipleAniPlay=function(){var e=cc.find("icon/"+s.SymbolID111010401.SYMBOL_BONUS_MIRROR,this.node3);e.getChildByName("ske").active=!1,e.getChildByName("idle").active=!0,e.getChildByName("img").active=!0,this.node3.getChildByName("light").scale=0,this.setAboveAni("zhakai2"),this.multiplyAni(this.getGoldReward(!0),this.getGoldReward(!0,!0),!0)},t.prototype.multiplyAni=function(e,t,n){void 0===n&&(n=!1);var o=this.node3.getChildByName("multiplyNode"),i=o.getChildByName("multiply").getComponent(c.default),a=this.node3.getChildByName("multiplyTemp"),r=a.getChildByName("multiply").getComponent(c.default);o.active=!0,a.active=!0,cc.Tween.stopAllByTarget(o),cc.Tween.stopAllByTarget(a);var s=p.DataUtil111010401.getWinRate(e),l=p.DataUtil111010401.getWinRate(t);i.string=s+"x",r.string=l+"x",cc.log(s,l,n),n?(o.opacity=0==s?0:255,o.y=0,cc.tween(o).to(.165,{y:35,opacity:0==s?0:120}).set({y:0,opacity:255}).call(function(){i.string=r.string}).start(),a.active=!0,a.opacity=120,a.y=-35,cc.tween(a).to(.165,{y:0,opacity:255}).set({y:0,opacity:0}).call(function(){a.active=!1}).start()):(a.active=!1,i.string=l+"x",o.opacity=255,o.y=0)},t.prototype.setScatterActive=function(e){this.scatterNode.active=e},t.prototype.setBelowAni=function(e,t){void 0===t&&(t=!1);var n=this.node3.getChildByName("belowAni").getComponent(sp.Skeleton);this.setSkeAni(e,n,t)},t.prototype.setAboveAni=function(e,t){void 0===t&&(t=!1);var n=this.node3.getChildByName("aboveAni").getComponent(sp.Skeleton);this.setSkeAni(e,n,t)},t.prototype.setSkeAni=function(e,t,n){void 0===n&&(n=!1),t.node.active=!0,t.setAnimation(0,e,n),n||t.setCompleteListener(function(){t.setCompleteListener(null),t.node.opacity=255,t.node.active=!1})},t.prototype.onCollect=function(e,t,n){var o=this.node3.convertToNodeSpaceAR(e),i=this.node3.getChildByName("multiplyNode"),a=this.node3.getChildByName("light");cc.Tween.stopAllByTarget(i),cc.Tween.stopAllByTarget(a),this.setMultiplyLight(r.GAME_END),i.opacity=255,i.position=cc.v3(),cc.tween(i).to(.233,{position:o}).call(function(){n&&n.run()}).delay(.1).set({opacity:0}).start();var s=t+1;s>7&&(s=7),slot.SoundMger.instance.playEffect("Mtp_Collect_0"+s),a.opacity=255,a.position=cc.v3(),cc.tween(a).to(.233,{position:o}).delay(.1).set({opacity:0}).start()},a([m(cc.Mask)],t.prototype,"roleMask",void 0),a([m(cc.Node)],t.prototype,"roleBg",void 0),a([m(cc.Node)],t.prototype,"node1",void 0),a([m(cc.Node)],t.prototype,"node2",void 0),a([m(cc.Node)],t.prototype,"node3",void 0),a([m(cc.Node)],t.prototype,"scatterNode",void 0),a([f,g("game/ts/bonus/BonusItemControl111010401")],t)}(slot.BaseView);n.default=y,cc._RF.pop()},{"../common/GameEventName111010401":"GameEventName111010401","../common/NumAtlasLabel111010401":"NumAtlasLabel111010401","../common/ShakeScene111010401":"ShakeScene111010401","../utils/DataUtil111010401":"DataUtil111010401","../utils/Util111010401":"Util111010401","./BonusGameLogic111010401":"BonusGameLogic111010401"}],BonusStartPop111010401:[function(e,t,n){"use strict";cc._RF.push(t,"a711fTHB99F8ouolWpr4VAM","BonusStartPop111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../common/GameEventName111010401"),s=e("../common/NumAtlasLabel111010401"),c=e("../ui/GameUILogic111010401"),l=cc._decorator,p=l.ccclass,u=l.property,d=l.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aniNode=null,t.openDoorSke=null,t.doorSke=null,t.bgSke=null,t.btnNode=null,t.loadingNode=null,t.completeHandler=null,t.bClick=!1,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad&&e.prototype.onLoad.call(this),window.BonusStartPop111010401=this},t.prototype.onOpen=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=t[0];this.completeHandler=o,c.default.instance.setGameControl(!1),c.default.instance.cloneScorePrefab(!0);var i=game.UIManager.getInstance().getRootNode().getChildByName("preventTouch");i&&(i.active=!1),this.initPage()},t.prototype.initPage=function(){slot.SoundMger.instance.playMusic("FreeGame_Back_Music",!0),slot.SoundMger.instance.playEffect("Fs_Start"),slot.SoundMger.instance.playEffect("Fs_Start_01"),cc.Tween.stopAll(),this.unscheduleAllCallbacks(),this.openDoorSke.node.active=!1,cc.Tween.stopAllByTarget(this.btnNode),this.btnNode.active=!1,cc.Tween.stopAllByTarget(this.aniNode),this.aniNode.opacity=0,cc.tween(this.aniNode).delay(.635).to(.3,{opacity:255}).start(),this.loadLableAni(),cc.Tween.stopAllByTarget(this.bgSke.node),this.bgSke.node.opacity=0,cc.tween(this.bgSke.node).to(.55,{opacity:255}).start(),this.doorSke.node.active=!0,this.doorSke.setAnimation(0,"bl_closedoor",!1),this.bgSke.node.active=!0,this.bgSke.setAnimation(0,"bl_start",!1)},t.prototype.loadLableAni=function(){var e=this;this.loadingNode.active=!0,cc.Tween.stopAllByTarget(this.loadingNode),this.loadingNode.opacity=0,this.scheduleOnce(function(){e.loadingNode.opacity=255},.5);var t=0,n=!1,o=this.loadingNode.getChildByName("lab").getComponent(s.default),i=this.loadingNode.getChildByName("img");cc.Tween.stopAllByTarget(i),cc.tween(i).by(3,{angle:-360}).repeatForever().start(),o.node.active=!1,this.scheduleOnce(function(){o.node.active=!0},.6),o.string=t+"",this.schedule(function(){n||(o.getComponent(s.default).string=t+++"",t>100&&(n=!0,e.loadingEnd()))},.015,100,.635)},t.prototype.loadingEnd=function(){var e=this;this.loadingNode.active=!1,this.btnNode.active=!0,this.bClick=!0,this.btnNode.scale=.7,cc.tween(this.btnNode).to(.4,{scale:1.2}).to(.033,{scale:1}).call(function(){e.bClick=!1}).delay(5).call(function(){e.onClick()}).start()},t.prototype.onClick=function(){if(!this.bClick){var e=game.UIManager.getInstance().getRootNode().getChildByName("preventTouch");e&&(e.active=!0),slot.SoundMger.instance.playEffect("Fs_Button_Sound"),cc.Tween.stopAll(),this.bClick=!0,this.btnNode.scale=1,cc.tween(this.btnNode).to(.033,{scale:1.2}).to(.2,{scale:1}).call(function(){}).start(),this.hidePage()}},t.prototype.hidePage=function(){var e=this;this.completeHandler&&this.completeHandler.run(),cc.Tween.stopAllByTarget(this.bgSke.node),this.bgSke.node.opacity=255,cc.tween(this.bgSke.node).to(.432,{opacity:0}).start(),cc.Tween.stopAllByTarget(this.aniNode),this.aniNode.opacity=255,cc.tween(this.aniNode).to(.432,{opacity:0}).start(),slot.SoundMger.instance.playEffect("Fs_Doors_Open"),cc.Tween.stopAllByTarget(this.openDoorSke.node),cc.tween(this.openDoorSke.node).delay(.3).call(function(){e.doorSke.node.active=!1,e.openDoorSke.node.active=!0,e.openDoorSke.setAnimation(0,"bl_opendoor",!1),e.openDoorSke.setCompleteListener(function(){e.openDoorSke.setCompleteListener(null),e.closePage()})}).delay(.265).start()},t.prototype.closePage=function(){slot.SoundMger.instance.stopEffect("Fs_Start"),game.UIManager.getInstance().close(this)},t.prototype.onClose=function(){c.default.instance.setGameControl(!0),game.EventManager.getInstance().raiseEvent(r.EventName.GAME_BONUS_START_POP_CLOSE),e.prototype.onClose.call(this)},a([u(cc.Node)],t.prototype,"aniNode",void 0),a([u(sp.Skeleton)],t.prototype,"openDoorSke",void 0),a([u(sp.Skeleton)],t.prototype,"doorSke",void 0),a([u(sp.Skeleton)],t.prototype,"bgSke",void 0),a([u(cc.Node)],t.prototype,"btnNode",void 0),a([u(cc.Node)],t.prototype,"loadingNode",void 0),a([p,d("game/ts/bonus/BonusStartPop111010401")],t)}(slot.BaseView);n.default=h,cc._RF.pop()},{"../common/GameEventName111010401":"GameEventName111010401","../common/NumAtlasLabel111010401":"NumAtlasLabel111010401","../ui/GameUILogic111010401":"GameUILogic111010401"}],BonusTimesItem111010401:[function(e,t,n){"use strict";cc._RF.push(t,"fafc0ukRBVKEKqtrkNDOnqi","BonusTimesItem111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=r.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.light=null,t.selectNode=null,t.itemSke=null,t.mask=null,t.coinSke=null,t.bActive=!1,t.index=0,t}return i(t,e),t.prototype.initTimes=function(e,t){this.bActive=t>=e+1,this.index=e,this.selectNode.active=t==this.index+1,this.playAnimation()},t.prototype.setActive=function(e){var t=e>=this.index+1;this.selectNode.active=e==this.index+1,this.bActive!=t&&(t&&slot.SoundMger.instance.playEffect("Fs_Retrigger_01"),this.bActive=t,this.playAnimation())},t.prototype.playAnimation=function(){var e=this;this.coinSke.node.active=this.bActive,this.mask.active=!this.bActive,cc.Tween.stopAllByTarget(this.itemSke.node),this.itemSke.node.opacity=this.itemSke.node.opacity,cc.tween(this.itemSke.node).to(.3,{opacity:this.bActive?255:0}).start(),cc.Tween.stopAllByTarget(this.light),this.light.active=this.bActive,this.bActive&&(this.coinSke.setAnimation(0,"zengjia",!1),this.coinSke.setCompleteListener(function(){e.coinSke.setCompleteListener(null),e.coinSke.node.active=!1}),this.itemSke.setAnimation(0,"damo",!1),this.light.opacity=0,cc.tween(this.light).to(.3,{opacity:255}).delay(.4).to(.3,{opacity:0}).start())},a([c(cc.Node)],t.prototype,"light",void 0),a([c(cc.Node)],t.prototype,"selectNode",void 0),a([c(sp.Skeleton)],t.prototype,"itemSke",void 0),a([c(cc.Node)],t.prototype,"mask",void 0),a([c(sp.Skeleton)],t.prototype,"coinSke",void 0),a([s,l("game/ts/bonus/BonusTimesItem111010401")],t)}(cc.Component);n.default=p,cc._RF.pop()},{}],CustomButton111010401:[function(e,t,n){"use strict";cc._RF.push(t,"514a8smEoBJPZqWAT5DkS3V","CustomButton111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,r.menu),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([s,c("game/\u6309\u94ae")],t)}(slot.CustomButton);n.default=l,cc._RF.pop()},{}],DataUtil111010401:[function(e,t,n){"use strict";cc._RF.push(t,"835794TV9BNYLPeDy6ywiN8","DataUtil111010401"),Object.defineProperty(n,"__esModule",{value:!0}),n.DataUtil111010401=void 0;var o=function(){function e(){}return e.getJackpotData=function(){var e=this.fromElmentgetData(10);return e&&e.map(function(e){return e.rate})||[]},e.getJackStateNumByIndex=function(e){return[3,4,5,6,7,8,9][e]},e.fromElmentgetData=function(e){var t;t=slot.GData.getParameter("DataDataSlotElementReward");for(var n=[],o=0;o<t.ids.length;o++)t.data[t.ids[o]].element==e&&n.push(t.data[t.ids[o]]);return n},e.getGameData=function(){var e=slot.GData.getParameter("DataGame");return e.data[e.ids[0]]},e.getWinData=function(t){return e.getGameData().winningAnimationConditions.find(function(e){return e.winningType===t})},e.getWinRate=function(e){return Number(e)/slot.SpinManager.instance.betCost},Object.defineProperty(e,"isMobile",{get:function(){return 1==cc.sys.isMobile},enumerable:!1,configurable:!0}),e.prototype.getDstStr=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!game.LanguageManager.getInstance()._isReady)return null;var o="",i=game.LanguageManager.getInstance().getKeyFromMap(e);if(i){if(o=i,t[0]&&t[0]instanceof Array)t[0].forEach(function(e){o=o.replace(/%s/,e)});else for(var a=0;a<t.length;++a)o=o.replace(/%s/,t[a]);o=o.replace(/&/g,"\n")}return o||console.log("\u591a\u8bed\u8a00\u6ca1\u914d\u6216\u8005\u662f\u7a7a\u5b57\u7b26\u4e32\uff1a"+e),o},e}();n.DataUtil111010401=o,window.DataUtil111010401=o,cc._RF.pop()},{}],GameBg111010401:[function(e,t,n){"use strict";cc._RF.push(t,"597fcE2jUVAnZlW9rkQGMfA","GameBg111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([s],t)}(slot.BaseView));n.default=c,cc._RF.pop()},{}],GameEventName111010401:[function(e,t,n){"use strict";var o,i;cc._RF.push(t,"8a74frU7n5KRrMxVJwTxN57","GameEventName111010401"),Object.defineProperty(n,"__esModule",{value:!0}),n.UICF=n.UIID=n.SymbolID111010401=n.GameID111010401=n.EventName=void 0,function(e){e.JTCONVERT_PLAYLINES="JTCONVERT_PLAYLINES_111010401",e.GAME_REFRESH_ROOM="GAME_REFRESH_ROOM_111010401",e.GAME_RENDER_AFTER="GAME_RENDER_AFTER_111010401",e.GAME_INIT="GAME_INIT_111010401",e.GAME_BEFORE_SCROLLER_START_ROLLING="GAME_BEFORE_SCROLLER_START_ROLLING_111010401",e.GAME_REEL_BEGIN="GAME_REEL_BEGIN_111010401",e.GAME_REEL_COMPLETE="GAME_REEL_COMPLETE_111010401",e.GAME_REEL_START="GAME_REEL_START_111010401",e.BONUS_GAME_TRIGGERED="BONUS_GAME_TRIGGERED_111010401",e.BONUS_GAME_OVER="BONUS_GAME_OVER_111010401",e.EVENT_LAYOUT_CHANGE="EVENT_LAYOUT_CHANGE_111010401",e.GAME_REEL_STOP="GAME_REEL_STOP_111010401",e.GAME_PRIZE_ANI="GAME_PRIZE_ANI_111010401",e.GAME_BANNER_SHOW_WIN="GAME_BANNER_SHOW_WIN_111010401",e.GAME_BANNER_CHANGE_RATE="GAME_BANNER_CHANGE_RATE",e.GAME_BANNER_UPDATE_WIN="GAME_BANNER_UPDATE_WIN",e.GAME_BONUS_START_POP_CLOSE="GAME_BONUS_START_POP_CLOSE",e.GAME_BONUS_ACTION_RESP="GAME_BONUS_ACTION_RESP",e.GAME_BONUS_ROLLER_START="EVENT_BONUS_ROLLER_START",e.GAME_BONUS_TIMES_UPDATE="GAME_BONUS_TIMES_UPDATE",e.GAME_BONUS_ADD_DUANJIAN="GAME_BONUS_ADD_DUANJIAN",e.GAME_BANNER_SCATTER_HIDE="GAME_BANNER_SCATTER_HIDE",e.EVENT_SLOT_BANNER_START="EVENT_SLOT_BANNER_START",e.EVENT_SLOT_BANNER_STOP="EVENT_SLOT_BANNER_STOP"}(n.EventName||(n.EventName={})),(n.GameID111010401||(n.GameID111010401={})).BONUS="01",function(e){e[e.default=0]="default",e[e.SYMBOL_NORMAL_MIN=1]="SYMBOL_NORMAL_MIN",e[e.SYMBOL_NORMAL_2=2]="SYMBOL_NORMAL_2",e[e.SYMBOL_NORMAL_3=3]="SYMBOL_NORMAL_3",e[e.SYMBOL_NORMAL_4=4]="SYMBOL_NORMAL_4",e[e.SYMBOL_NORMAL_5=5]="SYMBOL_NORMAL_5",e[e.SYMBOL_NORMAL_6=6]="SYMBOL_NORMAL_6",e[e.SYMBOL_NORMAL_7=7]="SYMBOL_NORMAL_7",e[e.SYMBOL_NORMAL_8=8]="SYMBOL_NORMAL_8",e[e.SYMBOL_NORMAL_9=9]="SYMBOL_NORMAL_9",e[e.SYMBOL_NORMAL_10=10]="SYMBOL_NORMAL_10",e[e.SYMBOL_NORMAL_11=11]="SYMBOL_NORMAL_11",e[e.SYMBOL_NORMAL_MAX=12]="SYMBOL_NORMAL_MAX",e[e.SYMBOL_SCATTER=13]="SYMBOL_SCATTER",e[e.SYMBOL_WILD=14]="SYMBOL_WILD",e[e.SYMBOL_BONUS_DEFAULT=15]="SYMBOL_BONUS_DEFAULT",e[e.SYMBOL_BONUS_MIRROR=16]="SYMBOL_BONUS_MIRROR",e[e.SYMBOL_BONUS_FEIBIAO=17]="SYMBOL_BONUS_FEIBIAO",e[e.SYMBOL_BONUS_DUANJIAN=18]="SYMBOL_BONUS_DUANJIAN",e[e.SYMBOL_WILD_MIRROR=19]="SYMBOL_WILD_MIRROR",e[e.SYMBOL_MAX=20]="SYMBOL_MAX"}(n.SymbolID111010401||(n.SymbolID111010401={})),function(e){e[e.NULL=0]="NULL",e[e.DEFAULT=111010401]="DEFAULT",e[e.BONUS_START_POP=111010402]="BONUS_START_POP",e[e.BONUS_END_POP=111010403]="BONUS_END_POP"}(i=n.UIID||(n.UIID={})),n.UICF=((o={})[i.BONUS_START_POP]={bundleName:"game_111010401",path:"prefabs/bonus/bonusStartPop",preventKeyboard:!0,preventTouch:!1,quickClose:!1,cache:!1,loadingAni:!1,showType:game.UIShowTypes.UI_ADDITION,openAni:game.UIDefAni.UI_OPEN,closeAni:game.UIDefAni.UI_CLOSE,zOrder:slot.LayerManage.bonus},o[i.BONUS_END_POP]={bundleName:"game_111010401",path:"prefabs/bonus/bonusEndPop",preventKeyboard:!0,preventTouch:!1,quickClose:!1,cache:!1,loadingAni:!1,showType:game.UIShowTypes.UI_ADDITION,openAni:game.UIDefAni.UI_OPEN,closeAni:game.UIDefAni.UI_CLOSE,zOrder:slot.LayerManage.bonus},o),cc._RF.pop()},{}],GameLayer111010401:[function(e,t,n){"use strict";cc._RF.push(t,"03dfd0k2WFPcJVsFSNgFaM+","GameLayer111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../common/GameEventName111010401"),s=e("../utils/DataUtil111010401"),c=e("./JTAnomalyRenders/JTLogicFactroy111010401"),l=e("./scrollerSkins/JTChildManager111010401"),p=e("./scrollerSkins/JTLayerManager111010401"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wildTask=null,t.scroller=null,t}return i(t,e),t.prototype.onLoad=function(){slot.SlotConfigManager.instance.registerJPTypes(3),e.prototype.onLoad.call(this),window.GameLayer111010401=this},t.prototype.start=function(){e.prototype.start&&e.prototype.start.call(this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.dispose()},t.prototype.refreshRoom=function(){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_REFRESH_ROOM)},t.prototype.onInit=function(){slot.SpinManager.instance.isFullLineAvailable=!1,this._initSlotMachineView(),slot.SpinManager.customResultCallBack=function(){return cc.log("\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u7ed3\u679c\uff08\u9002\u7528\u4e8e\u6d88\u9664\u7c7b)----------------:",slot.SpinManager.instance.customUpdateData),slot.SpinManager.instance.customUpdateData.game_10017.data.resultList}},t.prototype.initSlotMachineComplete=function(){e.prototype.initSlotMachineComplete.call(this)},t.prototype.onInitScroller=function(e){var t=this.scroller=e.scroller,n=slot.SlotConfigManager.instance.DataGame.getData(slot.SlotConfigManager.instance.gameID);t.setupFactory(new p.default,new l.default,new c.default),slot.EliminateEffectUtils.elePlayAni=slot.Handler.create(this,this.playPrizeAni,[],!1),slot.JTDefaultItemRender.setPlayCoinIndex(1,7);var o=t.options(slot.JTEliminatePipeline,slot.JTScrollerGroup.USE_CONVERT_MROE_LIST,n.column,e.scrollingComplete);o.childOption(slot.JTCreateScrolling,slot.JTOptionType.OPTION_CREATE),o.childOption(slot.JTBeginScrolling,slot.JTOptionType.OPTION_BEGIN_RUNNING,e.beginScrolling),o.childOption(slot.JTRunScrolling,slot.JTOptionType.OPTION_RUNNING,e.onSpinPreStop),o.childOption(slot.JTOverScrollEliminate,slot.JTOptionType.OPTION_OVER_RUNNING,e.scrollingProgress),t.setupDefaultItemList(this.getSourceList,slot.SlotConfigManager.instance.DataElement.getKeys(),!1);var i=new slot.JTScatterTask;t.registerTask(slot.JTRuleTaskManager.TYPE_SCATTER,i,new slot.JTTaskContainer)},t.prototype.playPrizeAni=function(e,t,n,o){cc.error("\u6d88\u9664\u52a8\u753b===============",e,n,o),game.EventManager.getInstance().raiseEvent(r.EventName.GAME_PRIZE_ANI,e,t,n,o)},t.prototype._rederAfter=function(){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_RENDER_AFTER)},t.prototype._initSlotMachineView=function(){this.slotMachine.spaceX=0,this.slotMachine.spaceY=0,this.slotMachine.gridWidth=126,this.slotMachine.gridHeight=115,this.slotMachine.playRenderInterval=0,this.slotMachine.afterRender(this,this._rederAfter),this._registerSlotMachineAnimation()},t.prototype._registerSlotMachineAnimation=function(){this.slotMachine.onContinuousNotWinAnimation(this,this._playContinuousNotWinAnimation),this.slotMachine.onNormalRewardsAnimation(this,this._playNormalRewardsAnimation),this.slotMachine.onGreatRewardsAnimation(this,this._playGreatRewardsAnimation),this.slotMachine.onMiddleRewardsAnimation(this,this._playMiddleRewardsAnimation),this.slotMachine.onSmallRewardsAnimation(this,this._playSmallRewardsAnimation),this.slotMachine.onSpinStart(this,this._onSpinStart),this.slotMachine.onSpinStop(this,this._onSpinStop),this.slotMachine.onSpinBegin(this,this._onSpinBegin),this.slotMachine.onSpinComplete(this,this._onSpinComplete)},t.prototype.beforeScrollerStartRolling=function(){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_BEFORE_SCROLLER_START_ROLLING)},t.prototype._onSpinStop=function(e,t,n){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_REEL_STOP,e,t,n)},t.prototype._onSpinBegin=function(){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_REEL_BEGIN)},t.prototype._onSpinComplete=function(){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_REEL_COMPLETE)},t.prototype._onSpinStart=function(e){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_REEL_START,e)},t.prototype._playContinuousNotWinAnimation=function(e,t){t.run()},t.prototype._playNormalRewardsAnimation=function(e,t){var n=s.DataUtil111010401.getWinRate(e),o=slot.Handler.create(this,function(){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_BANNER_UPDATE_WIN,n<5?slot.WinAniType.None:slot.WinAniType.Normal,e,!0,t)});this.showWinAniView(slot.WinAniType.Normal,e,o)},t.prototype._playGreatRewardsAnimation=function(e,t){var n=slot.Handler.create(this,function(){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_BANNER_UPDATE_WIN,slot.WinAniType.Great,e,!0,t)});this.showWinAniView(slot.WinAniType.Great,e,n)},t.prototype._playMiddleRewardsAnimation=function(e,t){var n=slot.Handler.create(this,function(){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_BANNER_UPDATE_WIN,slot.WinAniType.Middle,e,!0,t)});this.showWinAniView(slot.WinAniType.Middle,e,n)},t.prototype._playSmallRewardsAnimation=function(e,t){var n=slot.Handler.create(this,function(){game.EventManager.getInstance().raiseEvent(r.EventName.GAME_BANNER_UPDATE_WIN,slot.WinAniType.Small,e,!0,t)});this.showWinAniView(slot.WinAniType.Small,e,n)},t.prototype._onSpinSlotRender=function(){},t.prototype.addEventListener=function(){e.prototype.addEventListener.call(this)},t.prototype.removeEventListener=function(){e.prototype.removeEventListener.call(this)},t.prototype.onBonusGameTriggered=function(e,t){game.EventManager.getInstance().raiseEvent(r.EventName.BONUS_GAME_TRIGGERED,e,t)},t.prototype.onBonusGameOver=function(e,t){game.EventManager.getInstance().raiseEvent(r.EventName.BONUS_GAME_OVER,e,t)},t.ChangeSpeedTask=null,a([d],t)}(slot.AbstractMainView));n.default=h,cc._RF.pop()},{"../common/GameEventName111010401":"GameEventName111010401","../utils/DataUtil111010401":"DataUtil111010401","./JTAnomalyRenders/JTLogicFactroy111010401":"JTLogicFactroy111010401","./scrollerSkins/JTChildManager111010401":"JTChildManager111010401","./scrollerSkins/JTLayerManager111010401":"JTLayerManager111010401"}],GameUIControl111010401:[function(e,t,n){"use strict";cc._RF.push(t,"20825sYymBEQ7I+U9cKfJCx","GameUIControl111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.RollerAniStateEnum=n.BlackBackStateEnum=void 0;var r,s,c=e("../bonus/BonusGameLogic111010401"),l=e("../common/GameEventName111010401"),p=e("../common/ShakeScene111010401"),u=e("../common/SubQueueManager111010401"),d=e("./Banner111010401"),h=e("./GameUILogic111010401"),f=cc._decorator,m=f.ccclass,g=f.property;(function(e){e[e.default=0]="default",e[e.SHOW_1=1]="SHOW_1",e[e.SHOW_2=2]="SHOW_2",e[e.SHOW_ALL=3]="SHOW_ALL",e[e.HIDE_ALL=4]="HIDE_ALL"})(r=n.BlackBackStateEnum||(n.BlackBackStateEnum={})),function(e){e[e.default=0]="default",e[e.HIDE_1=1]="HIDE_1",e[e.HIDE_2=2]="HIDE_2",e[e.SHOW_ALL=3]="SHOW_ALL"}(s=n.RollerAniStateEnum||(n.RollerAniStateEnum={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.doorSke=null,t.moveNode=null,t.blackMaskParent=null,t.wildHighParent=null,t.scatterHighParent=null,t.wildRoleNode=null,t.symbolAboveExplosionsPrefab=null,t.symbolBelowExplosionsPrefab=null,t.wildAboveExplosionsPrefab=null,t.wildBelowExplosionsPrefab=null,t.scatterAboveExplosionsPrefab=null,t.scatterBelowExplosionsPrefab=null,t.rollerAniList=[],t.spinButtonShadow=null,t.bSpecialLast=!1,t.wildRoleSoundIndex=-1,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),h.default.instance.init(),c.default.instance.init()},t.prototype.start=function(){this.init()},t.prototype.init=function(){window.GameUIControl111010401=this,h.default.instance.resPrefabList.push(this.symbolAboveExplosionsPrefab),h.default.instance.resPrefabList.push(this.symbolBelowExplosionsPrefab),h.default.instance.resPrefabList.push(this.wildAboveExplosionsPrefab),h.default.instance.resPrefabList.push(this.wildBelowExplosionsPrefab),h.default.instance.resPrefabList.push(this.scatterAboveExplosionsPrefab),h.default.instance.resPrefabList.push(this.scatterBelowExplosionsPrefab),p.default.Instance.init(slot.MainView.instance.node.position,slot.MainView.instance.node)},t.prototype.onDestroy=function(){c.default.instance.removeEventListener(),h.default.instance.removeEventListener()},t.prototype.addEventListener=function(){game.EventManager.getInstance().addEventListener(l.EventName.GAME_REFRESH_ROOM,this.refreshRoom,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_RENDER_AFTER,this.afterRender,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_INIT,this.initGameUI,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_BEFORE_SCROLLER_START_ROLLING,this.beforeScrollerStartRolling,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_REEL_BEGIN,this._onSpinBegin,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_REEL_COMPLETE,this._onSpinComplete,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_REEL_START,this._onSpinStart,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_REEL_STOP,this._onSpinStop,this),game.EventManager.getInstance().addEventListener(l.EventName.GAME_PRIZE_ANI,this.playPrizeAni,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.event_stop_slot_machine_immediately,this),game.EventManager.getInstance().addEventListener(slot.CommonEventNames.EVENT_CLOSE_LOADING_VIEW,this.onEventCloseLoadingView,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_ELEMENT_PAY_ID_SHOW,this.elementPayMaskShow,this),game.EventManager.getInstance().addEventListener(slot.GameEventNames.EVENT_ELEMENT_PAY_ID_HIDE,this.elementPayMaskHide,this),game.EventManager.getInstance().addEventListener(l.EventName.EVENT_LAYOUT_CHANGE,this.layoutLandscape,this),game.EventManager.getInstance().addEventListener(l.EventName.EVENT_LAYOUT_CHANGE,this.layoutPortrait,this),game.EventManager.getInstance().addEventListener(l.EventName.JTCONVERT_PLAYLINES,this.onEventPlayLines,this),game.EventManager.getInstance().addEventListener(slot.CommonEventNames.EVENT_SHOW_OR_HIDE_MENU,this.showOrHideMenu,this)},t.prototype.removeEventListener=function(){game.EventManager.getInstance().removeEventListener(l.EventName.GAME_REFRESH_ROOM,this.refreshRoom,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_RENDER_AFTER,this.afterRender,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_INIT,this.initGameUI,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_BEFORE_SCROLLER_START_ROLLING,this.beforeScrollerStartRolling,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_REEL_BEGIN,this._onSpinBegin,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_REEL_COMPLETE,this._onSpinComplete,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_REEL_START,this._onSpinStart,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_REEL_STOP,this._onSpinStop,this),game.EventManager.getInstance().removeEventListener(l.EventName.GAME_PRIZE_ANI,this.playPrizeAni,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_STOP_SLOT_MACHINE_IMMEDIATELY,this.event_stop_slot_machine_immediately,this),game.EventManager.getInstance().removeEventListener(slot.CommonEventNames.EVENT_CLOSE_LOADING_VIEW,this.onEventCloseLoadingView,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_ELEMENT_PAY_ID_SHOW,this.elementPayMaskShow,this),game.EventManager.getInstance().removeEventListener(slot.GameEventNames.EVENT_ELEMENT_PAY_ID_HIDE,this.elementPayMaskHide,this),game.EventManager.getInstance().removeEventListener(l.EventName.EVENT_LAYOUT_CHANGE,this.layoutLandscape,this),game.EventManager.getInstance().removeEventListener(l.EventName.EVENT_LAYOUT_CHANGE,this.layoutPortrait,this),game.EventManager.getInstance().removeEventListener(l.EventName.JTCONVERT_PLAYLINES,this.onEventPlayLines,this),game.EventManager.getInstance().removeEventListener(slot.CommonEventNames.EVENT_SHOW_OR_HIDE_MENU,this.showOrHideMenu,this)},t.prototype.refreshRoom=function(){},t.prototype.elementPayMaskShow=function(e,t,n,o,i,a){this.setMaskActive(r.SHOW_ALL,[],!0);var s=slot.SlotMachineView.instance.scroller.effectAboveContainer;slot.SoundMger.instance.playEffect("sym_click"),a.parent=s,a.zIndex=999,a.opacity=255},t.prototype.elementPayMaskHide=function(){this.setMaskActive(r.HIDE_ALL)},t.prototype.onEventCloseLoadingView=function(){var e=this;this.initGameUI(),this.doorSke.node.parent=this.node.parent,this.doorSke.node.zIndex=9999,this.doorSke.node.active=!0,this.doorSke.clearTracks(),this.doorSke.setToSetupPose(),this.doorSke.setAnimation(0,"bl_opendoor",!1),this.doorSke.timeScale=0,slot.SoundMger.instance.playEffect("Doors_Open"),game.EventManager.getInstance().raiseEvent(l.EventName.EVENT_SLOT_BANNER_START);for(var t=0;t<slot.SlotMachineView.instance.scroller.renders.length;t++){var n=slot.SlotMachineView.instance.scroller.getRenderByIndex(t+1);n.checkWild()&&n.wildInitIdle()}this.scheduleOnce(function(){e.doorSke.timeScale=1,e.openDoorEnd()},.2),this.doorSke.setCompleteListener(function(){e.doorSke.setCompleteListener(null),e.doorSke.node.active=!1})},t.prototype.openDoorEnd=function(){for(var e=0;e<slot.SlotMachineView.instance.scroller.renders.length;e++){var t=slot.SlotMachineView.instance.scroller.getRenderByIndex(e+1);t.data==l.SymbolID111010401.SYMBOL_SCATTER&&t.onRollStopTemp(!0)}},t.prototype.afterRender=function(){var e=slot.SlotMachineView.instance.scroller.effectAboveContainer,t=this.moveNode.convertToWorldSpaceAR(cc.v3()),n=e.convertToNodeSpaceAR(t);this.moveNode.parent=e,this.moveNode.position=n;var o=slot.SlotMachineView.instance.scroller.effectBelowContainer,i=this.blackMaskParent.convertToWorldSpaceAR(cc.v3()),a=o.convertToNodeSpaceAR(i);this.blackMaskParent.parent=o,this.blackMaskParent.position=a,this.blackMaskParent.zIndex=1;var r=this.wildHighParent.convertToWorldSpaceAR(cc.v3()),s=o.convertToNodeSpaceAR(r);this.wildHighParent.parent=o,this.wildHighParent.position=s,this.wildHighParent.zIndex=2;var c=this.scatterHighParent.convertToWorldSpaceAR(cc.v3()),l=o.convertToNodeSpaceAR(c);this.scatterHighParent.parent=o,this.scatterHighParent.position=l,this.scatterHighParent.zIndex=2;for(var p=0;p<6;p++)slot.SlotMachineView.instance.scroller.adjustScrollerPostion(6+p,cc.v2(-756,-390))},t.prototype.initGameUI=function(){slot.SlotProtoManager.getInstance().restoreResult;var e=slot.SpinManager.instance.rollingResult,t=e.spinResult,n=Number(t.spinCoin),o=Number(t.lgCoin);o>0&&(n=o),n>0?game.EventManager.getInstance().raiseEvent(l.EventName.GAME_BANNER_UPDATE_WIN,h.default.instance.getWinAniType(n),n,!1,null):game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_SLOT_BANNER_SETINFO,d.BannerInfoEnum.BANNER_BASE);var i=e.updateList[0].value.handleState.game_10017.data.rate;game.EventManager.getInstance().raiseEvent(l.EventName.GAME_BANNER_CHANGE_RATE,i,!1),this.setRollerAniActive(s.default)},t.prototype.beforeScrollerStartRolling=function(){this.hideFrameAniView()},t.prototype._onSpinBegin=function(){cc.log("roll begin================="),h.default.instance.bImmediately=!1,h.default.instance.bRolling=!0,h.default.instance.scatterLandEffectIndex=0,h.default.instance.dropEffectGroup=[],h.default.instance.bScatterWait=!1,this.setRollerAniActive(s.SHOW_ALL,!0),this.bSpecialLast=!1,slot.SoundMger.instance.playEffect("Reel_Rolling");for(var e=0;e<slot.SlotMachineView.instance.scroller.renders.length;e++)slot.SlotMachineView.instance.scroller.getRenderByIndex(e+1).onRollStartTemp()},t.prototype._onSpinComplete=function(){cc.log("roll complete================="),h.default.instance.bRolling=!1,this.setRollerAniActive(s.default,!0)},t.prototype._onSpinStart=function(){},t.prototype._onSpinStop=function(e,t){var n;if(0==t&&(this.setRollerAniActive(s.HIDE_1,!0),slot.SpinManager.instance.isInTurbo||h.default.instance.bImmediately)){slot.SoundMger.instance.playEffect("Reel_Stop_Quick");for(var o=!1,i=0;i<36;i++)slot.SlotMachineView.instance.scroller.getRenderByIndex(i+1).checkWild()&&(o=!0);o&&slot.SoundMger.instance.playEffect("Wild_Appear")}if(6==t&&this.setRollerAniActive(s.HIDE_2,!0),t<11)this.addSpecialAni(t);else{var a=slot.SpinManager.instance.rollingResult;Number(null===(n=null==a?void 0:a.spinResult)||void 0===n?void 0:n.spinCoin)<=0&&this.addSpecialAni(t)}},t.prototype.addSpecialAni=function(e){if(11==e){if(this.bSpecialLast)return;this.bSpecialLast=!0}var t=[],n=[];slot.SpinManager.instance.isInTurbo||h.default.instance.bImmediately||(h.default.instance.bBaseGame?slot.SoundMger.instance.playEffect("Reel_Stop_01"):slot.SoundMger.instance.playEffect("Fs_Reel_Stop"));for(var o=3*e;o<3*e+3;o++){var i=slot.SlotMachineView.instance.scroller.getRenderByIndex(o+1);i.onRollStopTemp(!1),t.push(i.data),n.push(i.index)}},t.prototype.event_stop_slot_machine_immediately=function(){h.default.instance.bImmediately=!0},t.prototype.playPrizeAni=function(e,t,n,o,i){cc.log("\u6d88\u9664\u52a8\u753b===============",t,o,i);var a=i.curRate,r=i.crushRate,s=i.curSpinCoin,c=(i.preSumSpinCoin,i.totalSpinCoin),p=i.index;this.addSpecialAni(11),game.EventManager.getInstance().raiseEvent(l.EventName.GAME_BANNER_SCATTER_HIDE);var d=new u.SubQueueManager111010401;0==t.length?d.pushToQueue(slot.Handler.create(this,this.mirrorWildFunc,[p])):(d.pushToQueue(slot.Handler.create(this,this.eleHighFunc,[a,c,s,t])),d.pushToQueue(slot.Handler.create(this,this.prizeEnd,[t,a,r,s,o])),d.pushToQueue(slot.Handler.create(this,this.scatterWaitAni,[p,r,t]))),d.pushToQueue(slot.Handler.create(this,function(e,t){e&&e.run(),t&&t.run()},[n])),this.scheduleOnce(function(){d.execute()},.3)},t.prototype.scatterWaitAni=function(e,t,n,o){var i=this,a=[],s=slot.SpinManager.instance.rollingResult.updateList[0].value.handleState.game_10017.data.resultList;null==e&&(e=s.length-1);for(var c=s[e].spinResult.grid,p=0;p<c.length;p++)if(c[p]==l.SymbolID111010401.SYMBOL_SCATTER){var u=slot.SlotMachineView.instance.scroller.getRenderByIndex(p+1);a.push(u)}var f=slot.SlotMachineView.instance.scroller.ruleTaskManager.getRuleTask(slot.JTRuleTaskType.SCATTER);f.isRunning=!1;var m=a.length>=2;slot.EliminateEffectUtils.fallTime=0,slot.EliminateEffectUtils.boundTime=.3,slot.EliminateEffectUtils.scatterDopGapTime=m?.3:0,slot.EliminateEffectUtils.scatterWaitDropTime=m?3:0,h.default.instance.bScatterWait=!1,m&&(f.isRunning=!0,this.scheduleOnce(function(){h.default.instance.updateChangedChildsLayer(a,!0);for(var e=[],t=[0,1,2,3,4,5,6,7,8,9,10,11],o=0;o<n.length;o++){var s=n[o],c=Math.floor(s.index/3);e.push(c),t.indexOf(c)>=0&&t.splice(t.indexOf(c),1)}for(i.setScatterHighActive(e),i.setMaskActive(r.default,t),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_SLOT_BANNER_SETINFO,d.BannerInfoEnum.BANNER_FREE_SPIN),h.default.instance.bScatterWait=!0,h.default.instance.dropEffectGroup=[],slot.SoundMger.instance.playEffect("Scatter_Wait"),o=0;o<a.length;o++)(s=a[o]).scatterWaitAni(0==o)},1.5),this.scheduleOnce(function(){},3)),this.scheduleOnce(function(){slot.SoundMger.instance.playEffect("Mtp_Add"),game.EventManager.getInstance().raiseEvent(l.EventName.GAME_BANNER_CHANGE_RATE,t,!0)},m?1:.5),this.scheduleOnce(function(){h.default.instance.resetLayerSort(),n.forEach(function(e){e.onStopAnimation()}),i.setScatterHighActive([]),i.setMaskActive(r.HIDE_ALL)},m?4.8:1.5),o&&o.run()},t.prototype.mirrorWildFunc=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=null);var o=slot.SpinManager.instance.rollingResult.updateList[0].value.handleState.game_10017.data.resultList;null==e&&(e=o.length-1);for(var i=o[e].spinResult,a=i.grid,s=i.gridChanged,d=[],f=[],m=0;m<a.length;m++)if(a[m]==l.SymbolID111010401.SYMBOL_WILD){s[m];var g=slot.SlotMachineView.instance.scroller.getRenderByIndex(m+1);d.push(g)}d.sort(function(e,t){return Math.floor(e.index/3)%6-Math.floor(t.index/3)%6});var y=new u.SubQueueManager111010401,v=function(e){var t=d[e],o=h.default.instance.getMirrorIndex(c.default.instance.gridData.indexOf(t.index+1)),i=slot.SlotMachineView.instance.scroller.getRenderByIndex(c.default.instance.gridData[o]);f.push(i),t.wildSeqStart(),0==e&&y.pushToQueue(slot.Handler.create(_,function(e){n.scheduleOnce(function(){e&&e.run()},.333)},[])),y.pushToQueue(slot.Handler.create(_,function(e,o){t.wildLightActive(!0),slot.SoundMger.instance.playEffect("Trun_Wild"),n.showWildRole(t,i,slot.Handler.create(n,function(){slot.SoundMger.instance.playEffect("Wild_Aim"),p.default.Instance.startShakeScene(),t.wildIdle(),i.data=l.SymbolID111010401.SYMBOL_WILD_MIRROR,i.wildIdle(),i.wildLightActive(!0),e&&o&&o.run()})),e||n.scheduleOnce(function(){o&&o.run()},.3)},[e==d.length-1]))},_=this;for(m=0;m<d.length;m++)v(m);if(d.length>0){this.wildRoleSoundIndex++,this.wildRoleSoundIndex>5&&(this.wildRoleSoundIndex=1),slot.SoundMger.instance.playEffect("Wild_Role_0"+this.wildRoleSoundIndex);var E=d.concat(f);h.default.instance.updateChangedChildsLayer(E,!0),E.sort(function(e,t){return Math.floor(e.index/3)%6-Math.floor(t.index/3)%6});var S=[],A=[0,1,2,3,4,5,6,7,8,9,10,11];for(m=0;m<E.length;m++){var N=E[m],b=Math.floor(N.index/3);S.indexOf(b)<0&&S.push(b),A.indexOf(b)>=0&&A.splice(A.indexOf(b),1)}this.setWildHighActive(S),this.setMaskActive(r.default,A);var R=-1,M=-1;y.pushToQueue(slot.Handler.create(this,function(e){for(var t=function(e){var t=E[e],o=Math.floor(t.index/3);o>M&&(M=o,R++),n.scheduleOnce(function(){t.wildLightActive(!1)},.5*R+.1)},o=0;o<E.length;o++)t(o);n.scheduleOnce(function(){e&&e.run()},.5*R+.1)}))}y.pushToQueue(slot.Handler.create(this,function(){h.default.instance.resetLayerSort(),n.setWildHighActive([]),n.setMaskActive(r.HIDE_ALL),t&&t.run()})),y.execute()},t.prototype.showWildRole=function(e,t,n){var o=slot.SlotMachineView.instance.scroller.lineNumContainer,i=cc.instantiate(this.wildRoleNode);i.parent=o,i.position=o.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v3())),i.active=!0,i.zIndex=3;var a=i.getComponentInChildren(cc.MotionStreak);a.reset();var r=cc.mat4(),s=a.node.getWorldMatrix(r),c=s.m[12],l=s.m[13];a._lastWPos.x=c,a._lastWPos.y=l;var p=i.getChildByName("img"),u=i.getChildByName("dust").getComponent(cc.Animation),d=o.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.v3())),h=e.index>=18,f=Math.abs(Math.abs(t.convertToWorldSpaceAR(cc.v3()).y)-Math.abs(e.convertToWorldSpaceAR(cc.v3()).y));p.active=!0,u.node.active=!1,u.node.angle=h?0:-180,this.scheduleOnce(function(){u.node.active=!0,u.play(),u.once(cc.Animation.EventType.FINISHED,function(){i.removeFromParent(),i.active=!1})},f/(153.5/.15)-.1),i.angle=h?0:180,cc.tween(i).to(f/(153.5/.15),{position:d}).call(function(){p.active=!1,n&&n.run()}).start()},t.prototype.eleHighFunc=function(e,t,n,o,i){var a=this;h.default.instance.updateChangedChildsLayer(o,!0);for(var s=!1,c=!1,p=0;p<o.length;p++){var u=o[p];u.playWinAni(),u.index<18?s=!0:c=!0}this.setMaskActive(r.SHOW_ALL),this.scheduleOnce(function(){slot.SoundMger.instance.playEffect("Knife_Explode"),a.setMaskActive(s&&c?r.HIDE_ALL:s?r.SHOW_2:r.SHOW_1)},.563),game.EventManager.getInstance().raiseEvent(slot.GameEventNames.EVENT_UPDATE_WINSCORE,t,!1,!1,!1),game.EventManager.getInstance().raiseEvent(l.EventName.GAME_BANNER_SHOW_WIN,e,t,n,slot.Handler.create(this,function(){})),this.scheduleOnce(function(){i&&i.run()},1)},t.prototype.prizeEnd=function(e,t,n,o,i,a){h.default.instance.dropIndex++,h.default.instance.resetLayerSort(),a&&a.run()},t.prototype.setRollerAniActive=function(e,t){void 0===e&&(e=s.default),void 0===t&&(t=!1);for(var n=e==s.SHOW_ALL,o=e==s.HIDE_1||e==s.default,i=e==s.HIDE_2||e==s.default,a=function(e){var a=r.rollerAniList[e];n&&(a.active=!0),cc.Tween.stopAllByTarget(a),cc.tween(a).to(t?.3:0,{opacity:n?255:0}).call(function(){(0==e&&o||1==e&&i)&&(a.active=!1)}).start()},r=this,c=0;c<this.rollerAniList.length;c++)a(c)},t.prototype.setScatterHighActive=function(e){void 0===e&&(e=[]);for(var t=0;t<this.scatterHighParent.children.length;t++){var n=this.scatterHighParent.children[t],o=e.indexOf(t)>=0;cc.Tween.stopAllByTarget(n),cc.tween(n).to(.3/255*Math.abs((o?255:0)-n.opacity),{opacity:o?255:0}).start()}},t.prototype.setWildHighActive=function(e){void 0===e&&(e=[]);for(var t=0;t<this.wildHighParent.children.length;t++){var n=this.wildHighParent.children[t],o=e.indexOf(t)>=0;cc.Tween.stopAllByTarget(n),cc.tween(n).to(.3/180*Math.abs((o?180:0)-n.opacity),{opacity:o?180:0}).start()}},t.prototype.setMaskActive=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=!1),e!=r.SHOW_1&&e!=r.SHOW_ALL||(t=t.concat([0,1,2,3,4,5])),e!=r.SHOW_2&&e!=r.SHOW_ALL||(t=t.concat([6,7,8,9,10,11]));for(var o=n?.15:.333,i=0;i<this.blackMaskParent.children.length;i++){var a=this.blackMaskParent.getChildByName(""+(i+1));a.active=!0,cc.Tween.stopAllByTarget(a);var s=t.indexOf(i)>=0?155:0;cc.tween(a).to(o/155*Math.abs(s-a.opacity),{opacity:s}).start()}},t.prototype.onEventPlayLines=function(e,t){var n=slot.SpinManager.instance.rollingResult.spinResult;n.lineResult,Number(n.spinCoin),t.run()},t.prototype.showFrameAniView=function(e,t,n){void 0===n&&(n=!1)},t.prototype.hideFrameAniView=function(){for(var e=0;e<slot.SlotMachineView.instance.scroller.renders.length;e++)slot.SlotMachineView.instance.scroller.renders[e].recoverSlotFrameAniViewSpin()},t.prototype.showOrHideMenu=function(e,t){void 0===t&&(t=!1),this.spinButtonShadow&&(this.spinButtonShadow.active=!t)},a([g(sp.Skeleton)],t.prototype,"doorSke",void 0),a([g(cc.Node)],t.prototype,"moveNode",void 0),a([g(cc.Node)],t.prototype,"blackMaskParent",void 0),a([g(cc.Node)],t.prototype,"wildHighParent",void 0),a([g(cc.Node)],t.prototype,"scatterHighParent",void 0),a([g(cc.Node)],t.prototype,"wildRoleNode",void 0),a([g(cc.Prefab)],t.prototype,"symbolAboveExplosionsPrefab",void 0),a([g(cc.Prefab)],t.prototype,"symbolBelowExplosionsPrefab",void 0),a([g(cc.Prefab)],t.prototype,"wildAboveExplosionsPrefab",void 0),a([g(cc.Prefab)],t.prototype,"wildBelowExplosionsPrefab",void 0),a([g(cc.Prefab)],t.prototype,"scatterAboveExplosionsPrefab",void 0),a([g(cc.Prefab)],t.prototype,"scatterBelowExplosionsPrefab",void 0),a([g(cc.Node)],t.prototype,"rollerAniList",void 0),a([g({type:cc.Node,tooltip:"\u65cb\u8f6c\u6309\u94ae\u9634\u5f71\u6548\u679c\u8282\u70b9"})],t.prototype,"spinButtonShadow",void 0),a([m],t)}(slot.BaseView);n.default=y,cc._RF.pop()},{"../bonus/BonusGameLogic111010401":"BonusGameLogic111010401","../common/GameEventName111010401":"GameEventName111010401","../common/ShakeScene111010401":"ShakeScene111010401","../common/SubQueueManager111010401":"SubQueueManager111010401","./Banner111010401":"Banner111010401","./GameUILogic111010401":"GameUILogic111010401"}],GameUILogic111010401:[function(e,t,n){"use strict";cc._RF.push(t,"528f5nA+tVK0rm8kGFATVfF","GameUILogic111010401"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameModel111010401=void 0;var o,i=e("../common/GameEventName111010401"),a=e("../utils/DataUtil111010401");(function(e){e[e.BASE=1]="BASE",e[e.FREE_GAME=2]="FREE_GAME"})(o=n.GameModel111010401||(n.GameModel111010401={}));var r=function(){function e(){this._gameModel=o.BASE,this.bReSpin=!1,this.resPrefabList=[],this.bImmediately=!1,this.spinRespData=null,this.dropIndex=0,this.bRolling=!1,this.mirrorConfig=[],this.scatterLandEffectIndex=0,this.dropEffectGroup=[],this.bScatterWait=!1,this.reSpinGameInfo=null}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameModel",{get:function(){return this._gameModel},set:function(e){this._gameModel=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bBaseGame",{get:function(){return this._gameModel==o.BASE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bFreeGame",{get:function(){return this._gameModel==o.FREE_GAME},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameID",{get:function(){return core.Global.clientGameId},enumerable:!1,configurable:!0}),e.prototype.init=function(){window.GameUILogic111010401=this,game.EventManager.getInstance().addEventListener(slot.NetSlotConst.SPINRESP,this.spinResp,this),game.EventManager.getInstance().addEventListener(slot.NetSlotConst.RESTORERESP,this._onLastGameInfoResp,this),this.mirrorConfig=[];for(var e=0;e<18;e++)this.mirrorConfig[e]=[],this.mirrorConfig[e][0]=e,this.mirrorConfig[e][1]=e%6+6*(5-Math.floor(e/6))},e.prototype.getMirrorIndex=function(e){for(var t=-1,n=0;n<this.mirrorConfig.length;n++){var o=this.mirrorConfig[n],i=o.indexOf(e);i>=0&&(t=o[0==i?1:0])}return t},e.prototype.playScatterLandEffect=function(){this.scatterLandEffectIndex++,(this.bImmediately||slot.SpinManager.instance.isInTurbo)&&this.scatterLandEffectIndex>1||(this.scatterLandEffectIndex>=5&&(this.scatterLandEffectIndex=5),cc.log("playScatterLandEffect",this.scatterLandEffectIndex),slot.SoundMger.instance.playEffect("Scatter_0"+this.scatterLandEffectIndex))},e.prototype.playDropEffect=function(e){var t=Math.floor(e.index/3);this.dropEffectGroup.indexOf(t)>=0||(this.dropEffectGroup.push(t),this.bScatterWait?slot.SoundMger.instance.playEffect("Symbol_Drop_01"):slot.SoundMger.instance.playEffect("Explode_Drop"))},e.prototype.removeEventListener=function(){game.EventManager.getInstance().removeEventListener(slot.NetSlotConst.SPINRESP,this.spinResp,this),game.EventManager.getInstance().removeEventListener(slot.NetSlotConst.RESTORERESP,this._onLastGameInfoResp,this)},e.prototype._onLastGameInfoResp=function(e,t){cc.log("_onLastGameInfoResp: =======",t.state.normalData),t.state.freeData||t.state.normalData},e.prototype.fromDatagetJackpot=function(e){for(var t=[],n=e.length-1;n>=0;n--)2==e[n].betType&&t.push(e[n].rate);return t.sort(function(e,t){return t-e}),t},e.prototype.spinResp=function(e,t){this.spinRespData=t},e.prototype.onInitReSpin=function(e){switch(e.type){case slot.OperationState.ReSpin:this.bReSpin=!0,console.log("\u91cd\u8f6c \u91cd\u8fde-------",e)}},e.prototype.onReSpinTriggered=function(e){switch(e.type){case slot.OperationState.ReSpin:console.log("\u89e6\u53d1\u4e86\u91cd\u8f6c-------",e),this.reSpinGameInfo=e,this.bReSpin=!0}},e.prototype.onReSpinOver=function(e){switch(e.type){case slot.OperationState.ReSpin:console.log("\u91cd\u8f6c \u7ed3\u675f-------",e),this.bReSpin=!1}},e.prototype.aniClipPLay=function(e,t,n,o,i,a){void 0===n&&(n="animation"),void 0===o&&(o=!1),void 0===i&&(i=24),void 0===a&&(a=null);var r=e.getComponent(cc.Animation);if(r){var s=r.getAnimationState(n);s?(cc.log("loadAniClip: ",s),s.clip.sample=i,s.clip.wrapMode=o?cc.WrapMode.Loop:cc.WrapMode.Normal,r.resume(n),r.play(n),o||r.once(cc.Animation.EventType.FINISHED,function(){a&&a.run()})):this.loadAniClip(e,t,n,o,i,a)}else this.loadAniClip(e,t,n,o,i,a)},e.prototype.loadAniClip=function(e,t,n,o,i,a){var r=this;void 0===n&&(n="animation"),void 0===o&&(o=!1),void 0===i&&(i=24),void 0===a&&(a=null);var s=e.getComponent(cc.Sprite);s||(s=e.addComponent(cc.Sprite)),s.sizeMode=cc.Sprite.SizeMode.RAW,s.trim=!1;var c=e.getComponent(cc.Animation);c||(c=e.addComponent(cc.Animation)),game.ResLoader.getInstance().loadRes(t,cc.SpriteAtlas,function(s,l){var p=l.getSpriteFrames(),u=cc.AnimationClip.createWithSpriteFrames(p,i);u.name=n,u.wrapMode=o?cc.WrapMode.Loop:cc.WrapMode.Normal,c.addClip(u),r.aniClipPLay(e,t,n,o,i,a)},slot.GData.bundleName)},e.prototype.getCurStageRewardCoin=function(){var e=[],t=0,n=slot.SpinManager.instance.rollingResult.updateList[0].value.handleState.game_10017;return n&&(e=n.data.resultList),e&&e.length>0&&(t=Number(e[this.dropIndex].spinResult.spinCoin)),t},e.prototype.getWinElemList=function(e){for(var t=[],n=0;n<e.length;n++)if(e[n].elementResult.elem!=i.SymbolID111010401.SYMBOL_SCATTER)for(var o=0;o<e[n].winPos.length;o++){var a=Number(e[n].winPos[o]),r=slot.SlotMachineView.instance.scroller.getRenderByIndex(a);t.push(r)}return t},e.prototype.getWinLineElemList=function(e){for(var t=[],n=0;n<e.winPos.length;n++){var o=Number(e.winPos[n]),i=slot.SlotMachineView.instance.scroller.getRenderByIndex(o);t.push(i)}return t},e.prototype.getPrefabResByName=function(e){var t=null;return this.resPrefabList.forEach(function(n){n.name==e&&(t=n)}),t},e.prototype.updateChangedChildsLayer=function(e,t){void 0===t&&(t=!1),slot.SlotMachineView.instance.scroller.layerSortPlayContainer&&slot.SlotMachineView.instance.scroller.layerSortPlayContainer.updateChangedChildsLayer(e,t)},e.prototype.resetLayerSort=function(){slot.SlotMachineView.instance.scroller.layerSortPlayContainer&&slot.SlotMachineView.instance.scroller.layerSortPlayContainer.resetLayerSort()},e.prototype.getWinAniType=function(e){var t=a.DataUtil111010401.getWinRate(e),n=slot.WinAniType.None;return t>=a.DataUtil111010401.getWinData(1).rate?n=slot.WinAniType.Great:t>=a.DataUtil111010401.getWinData(2).rate?n=slot.WinAniType.Middle:t>=a.DataUtil111010401.getWinData(3).rate?n=slot.WinAniType.Small:t>=5&&(n=slot.WinAniType.Normal),n},e.prototype.setGameControl=function(e){slot.MainView.instance.node.getChildByName("scorePrefab").position=cc.v3(0,e?-405:-650)},e.prototype.cloneScorePrefab=function(e){var t=cc.Canvas.instance.node,n=t.getChildByName("scoreCloneNode");if(e){if(!n){var o=slot.MainView.instance.node.getChildByName("scorePrefab");(n=cc.instantiate(o)).parent=t,n.name="scoreCloneNode"}n.position=cc.v3(0,-650),n.active=!0,n.opacity=255,n.zIndex=302}!e&&n&&(n.active=!1,n.removeFromParent())},e._instance=null,e}();n.default=r,cc._RF.pop()},{"../common/GameEventName111010401":"GameEventName111010401","../utils/DataUtil111010401":"DataUtil111010401"}],JTAnomalyRenders:[function(e,t,n){"use strict";cc._RF.push(t,"039b2+EACBHvoo0buZ9GKco","JTAnomalyRenders");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.JTAnomalyRenders=void 0;var a=function(e){function t(){return e.call(this)||this}return i(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){if(null!=e){if(this._data==e&&e)return this.reset(),void this.gotoAndStop(0);if(this._data=e,this._data="number"!=typeof e?e.element:e,0==e){var t=this.owner;this.height=t.config.girdHeight,this.skinLoader.url=null}else t=this.owner,this.height=t.config.girdHeight,this.gotoAndStop(0);this.reset(),this.currentFrame=0}},enumerable:!1,configurable:!0}),t}(slot.SpinSlotView);n.JTAnomalyRenders=a,cc._RF.pop()},{}],JTChildManager111010401:[function(e,t,n){"use strict";cc._RF.push(t,"5719b+lJVtDfYSZeMtE0kix","JTChildManager111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=e("../SpinSlotViewExtend111010401"),r=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.registerClassAlias=function(){return this.registerClass(slot.JTChildFactory.SCROLLER_TYPE,slot.JTScroller),this.registerClass(slot.JTChildFactory.ITEMRENDER_TYPE,a.default),this.registerClass(slot.JTChildFactory.GIRD_TYPE,slot.JTSkinnableGridRender),this.registerClass(slot.JTChildFactory.SCATTER_TYPE,slot.JTScatterGridRender),this},t.prototype.changedLine=function(t,n){e.prototype.changedLine.call(this,t,n)},t}(slot.JTChildFactory);n.default=r,cc._RF.pop()},{"../SpinSlotViewExtend111010401":"SpinSlotViewExtend111010401"}],JTCollectTask111010401:[function(e,t,n){"use strict";cc._RF.push(t,"69e4cxv8dxMRbVd3pvJRGjN","JTCollectTask111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.runningTask=function(){this.getLineParser().isInitiative,e.prototype.complete.call(this)},a([s],t)}(slot.JTParseTask));n.default=c,cc._RF.pop()},{}],JTLayerManager111010401:[function(e,t,n){"use strict";cc._RF.push(t,"aa69cmSY1FEmpzsFRlItGKh","JTLayerManager111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.initialize=function(e){this.addChildNode(slot.JTLayerFactory.SKIN_LOADER_CONTAINER,e);var n=this.addChildNode(slot.JTLayerFactory.SCROLLER_CONTAINER,e);this.addSubScrollerMask(n,e),this.addChildNode(slot.JTLayerFactory.LAYER_SORT_SCATTER_PLAY_CONTAINER,e),this.addChildNode(slot.JTLayerFactory.LAYER_SORT_STOP_RENDER,e),this.addChildNode(t.FRAME_IMAGE_CONTAINER,e),this.addChildNode(slot.JTLayerFactory.EFFECT_BELOW_CONTAINER,e),this.addChildNode(slot.JTLayerFactory.LINE_CONTAINER,e),this.addChildNode(slot.JTLayerFactory.EFFECT_ABOVE_CONTAINER,e),this.addChildNode(slot.JTLayerFactory.LAYER_SORT_PLAY_RENDER,e),this.addChildNode(slot.JTLayerFactory.LINE_NUMBER_CONTAINER,e)},t.prototype.addSubScrollerMask=function(e,n){for(var o=this.addChildNode(t.SUB_MASK_A,e),i=this.addChildNode(t.SUB_MASK_B,e),a=n.itemContainers,r=0;r<a.length;r++){var s=a[r];s.removeFromParent(),r<6?o.addChild(s):i.addChild(s)}o.setPolygon([cc.v2(0,0),cc.v2(756,0),cc.v2(756,-350),cc.v2(0,-350)]),i.setPolygon([cc.v2(0,-385),cc.v2(756,-385),cc.v2(756,-735),cc.v2(0,-735)])},t.prototype.registerClassAlias=function(){return this.registerClass(slot.JTLayerFactory.EFFECT_BELOW_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.SKIN_LOADER_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.SCROLLER_MASK_CONTAINER,slot.JTScrollerGroupMask),this.registerClass(slot.JTLayerFactory.SCROLLER_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.LAYER_SORT_SCATTER_PLAY_CONTAINER,slot.JTLayerSortContainer),this.registerClass(slot.JTLayerFactory.LAYER_SORT_STOP_RENDER,slot.JTLayerSortContainer),this.registerClass(t.FRAME_IMAGE_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.LAYER_SORT_PLAY_RENDER,slot.JTLayerSortContainer),this.registerClass(slot.JTLayerFactory.LINE_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.LINE_NUMBER_CONTAINER,slot.JTGComponent),this.registerClass(slot.JTLayerFactory.EFFECT_ABOVE_CONTAINER,slot.JTGComponent),this.registerClass(t.SUB_MASK_A,slot.JTScrollerGroupMask),this.registerClass(t.SUB_MASK_B,slot.JTScrollerGroupMask),this},t.FRAME_IMAGE_CONTAINER=999,t.SUB_MASK_A=1001,t.SUB_MASK_B=1002,t}(slot.JTLayerFactory);n.default=a,cc._RF.pop()},{}],JTLogicFactroy111010401:[function(e,t,n){"use strict";cc._RF.push(t,"5915fTb6iZNkK5TI5Z3IGsm","JTLogicFactroy111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.adjustFlowOptions=function(){},a([s],t)}(slot.JTLogicFactroy));n.default=c,cc._RF.pop()},{}],LanguageInfo111010401:[function(e,t,n){"use strict";cc._RF.push(t,"a7534kriytEJZ/5P6CpM60F","LanguageInfo111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,r.menu),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},a([s,c("game/\u591a\u8bed\u8a00/\u56fe\u7247")],t)}(slot.LanguageInfoBase);n.default=l,cc._RF.pop()},{}],LanguageSpInfoBase111010401:[function(e,t,n){"use strict";cc._RF.push(t,"ccf2bvgp+NCA4uadA2FzQ3/","LanguageSpInfoBase111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.languageSkCfgDataInfo111010401=n.SkLanguageMode=void 0;var r,s=e("./ReplaceSkeletonTex"),c=cc._decorator,l=c.ccclass,p=c.property,u=c.menu;(function(e){e[e.set_animation=0]="set_animation",e[e.set_skeletionData=1]="set_skeletionData",e[e.set_texture=2]="set_texture",e[e.set_skin=3]="set_skin"})(r=n.SkLanguageMode||(n.SkLanguageMode={}));var d=function(){function e(){this.language="",this.modelData=""}return a([p({tooltip:"\u8bed\u8a00\u7f29\u5199"})],e.prototype,"language",void 0),a([p({tooltip:"SkLanguageMode.set_animation\u6a21\u5f0f\u4e0b\uff1a\u8868\u793a\u52a8\u4f5canimation\u540d\u5b57\uff1b\n        SkLanguageMode.set_skeletionData\u6a21\u5f0f\u4e0b\uff1a\u8868\u793a\u9aa8\u9abc\u6570\u636e\u6587\u4ef6\u8def\u5f84 \uff1b\n        SkLanguageMode.set_texture\u6a21\u5f0f\u4e0b\uff1a\u8868\u793a\u8d34\u56fe\u8def\u5f84(\u6bcf\u4e2a\u8def\u52b2\u4e0b\u7684\u8d34\u56fe\u540d\u548c\u8d34\u56fe\u5c3a\u5bf8\u5fc5\u987b\u4e00\u81f4)\uff1b\n        SkLanguageMode.set_skin\u6a21\u5f0f\u4e0b\uff1a\u8868\u793askin\u540d\u79f0\uff1b"})],e.prototype,"modelData",void 0),a([l("languageSkCfgDataInfo111010401")],e)}();n.languageSkCfgDataInfo111010401=d;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skLangMode=r.set_animation,t.languageSkCfgDataInfos=[],t}return i(t,e),t.prototype.onLoad=function(){for(var e=this.node.getComponent(sp.Skeleton),t=null,n=0,o=this.languageSkCfgDataInfos;n<o.length;n++){var i=o[n];if(i.language==slot.GData.curLanguage){t=i;break}i.language==game.LanguageType.EN&&(t=i)}var a=e.defaultSkin,c=e.defaultAnimation,l=e.loop;switch(this.skLangMode){case r.set_animation:e&&t&&t.modelData&&e.setAnimation(0,t.modelData,l);break;case r.set_skeletionData:this.setSpProperty(e,{json:this.getLanguageUrl(t.modelData)},slot.GData.bundleName,function(e){e&&(e.setSkin(a),e.setAnimation(0,c,l))});break;case r.set_texture:s.default.replaceNewAniTex(e,this.getLanguageUrl(t.modelData),e.defaultAnimation,e.loop);break;case r.set_skin:e.setSkin(t.modelData),e.setAnimation(0,c,l)}},t.prototype.getLanguageUrl=function(e,t){return void 0===t&&(t=slot.GData.curLanguage),e?(t=this.languageSkCfgDataInfos.length>0&&this.languageSkCfgDataInfos.map(function(e){return e.language}).includes(t)?t:"en",e=e.replace("&",t)):null},t.prototype.setSpProperty=function(e,t,n,o){n||(n=slot.GData.bundleName),t&&game.ResLoader.getInstance().loadRes(t.json,sp.SkeletonData,null,function(t,n){t?o&&o(null):(e.skeletonData=n,o&&o(e))},n)},a([p({type:cc.Enum(r),tooltip:"\u9aa8\u9abc\u52a8\u753b\u8d44\u6e90\u591a\u8bed\u8a00\u5b9e\u73b0\u6a21\u5f0f"})],t.prototype,"skLangMode",void 0),a([p({tooltip:"\u591a\u8bed\u8a00\u4e0e\u9aa8\u9abc\u4fe1\u606f\u6620\u5c04\u914d\u7f6e",type:d,visible:function(){return this.skLangMode==r.set_animation||this.skLangMode==r.set_skeletionData||this.skLangMode==r.set_texture||this.skLangMode==r.set_skin}})],t.prototype,"languageSkCfgDataInfos",void 0),a([l,u("game/\u9aa8\u9abc\u591a\u8bed\u8a00")],t)}(cc.Component);n.default=h,cc._RF.pop()},{"./ReplaceSkeletonTex":"ReplaceSkeletonTex"}],LanguangeCompSlot111010401:[function(e,t,n){"use strict";cc._RF.push(t,"b8509PfSbxC3ru2sH5lBetP","LanguangeCompSlot111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([s],t)}(slot.LanguangeCompSlot));n.default=c,cc._RF.pop()},{}],Main111010401:[function(e,t,n){"use strict";cc._RF.push(t,"57d00zdnbpIl73C/PZZzTrK","Main111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../common/GameEventName111010401"),s=e("../common/WinAniManager111010401"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),game.BaseUIConf.getInstance().mergeUIConf(r.UICF);var t=game.BaseUIConf.getInstance().getUICF();game.UIManager.getInstance().initUIConf(t)},t.prototype.getWinAniManagerClass=function(){return s.default},a([l],t)}(slot.MainView));n.default=p,cc._RF.pop()},{"../common/GameEventName111010401":"GameEventName111010401","../common/WinAniManager111010401":"WinAniManager111010401"}],MultiPSRandomRefresh111010401:[function(e,t,n){"use strict";cc._RF.push(t,"9d563/yyzZBrpQnYHnRFXld","MultiPSRandomRefresh111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=r.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atlas=null,t.aniFps=15,t.psNodeNum=5,t.emissionRate=10,t.psIndexArray=[],t.psArray=[],t.count=0,t.spriteArray=[],t}return i(t,e),t.prototype.onLoad=function(){if(this.atlas){this.psArray=this.node.getComponentsInChildren(cc.ParticleSystem),this.spriteArray=this.atlas.getSpriteFrames(),this.count=this.spriteArray.length;var e=Math.round(Math.random()*this.count);for(this.psIndexArray.push(e);this.psArray.length<this.psNodeNum;){var t=cc.instantiate(this.psArray[0].node);t.parent=this.psArray[0].node.parent;var n=Math.round(Math.random()*this.count);this.psIndexArray.push(n),this.psArray.push(t.getComponent(cc.ParticleSystem))}}},t.prototype.onResetSystem=function(){this.psArray.forEach(function(e){e.resetSystem()})},t.prototype.onStopSystem=function(){this.psArray.forEach(function(e){e.stopSystem()})},t.prototype.onEnable=function(){this.schedule(this.refreshSprite,1/this.aniFps,cc.macro.REPEAT_FOREVER)},t.prototype.onDisable=function(){this.unschedule(this.refreshSprite)},t.prototype.refreshSprite=function(){for(var e=0;e<this.psArray.length;e++){var t=this.psArray[e];this.psIndexArray[e]>=this.count&&(this.psIndexArray[e]=0),t.spriteFrame=this.spriteArray[this.psIndexArray[e]],t.emissionRate=this.emissionRate,t.autoRemoveOnFinish=!1,this.psIndexArray[e]++}},a([c({type:cc.SpriteAtlas,tooltip:"\u56fe\u96c6\u8d44\u6e90"})],t.prototype,"atlas",void 0),a([c({type:cc.Integer,tooltip:"\u6bcf\u79d2\u66ff\u6362\u7c92\u5b50\u8d34\u56fe\u591a\u5c11\u6b21"})],t.prototype,"aniFps",void 0),a([c({tooltip:"ParticleSystem\u8282\u70b9\u603b\u6570\u91cf"})],t.prototype,"psNodeNum",void 0),a([c({tooltip:"\u5355\u7c92\u5b50\u8282\u70b9\u6bcf\u79d2\u53d1\u5c04\u7c92\u5b50\u6570\u76ee"})],t.prototype,"emissionRate",void 0),a([s,l("game/\u7c92\u5b50\u64ad\u653e\u56fe\u96c6\u52a8\u753b")],t)}(cc.Component);n.default=p,cc._RF.pop()},{}],NumAtlasLabel111010401:[function(e,t,n){"use strict";cc._RF.push(t,"0452atpXL1HG41C7ZUyJq7w","NumAtlasLabel111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,r.menu),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([s,c("game/\u6570\u5b57\u56fe\u96c6")],t)}(slot.CommonNumAtlasBase);n.default=l,cc._RF.pop()},{}],ParticleSystemSpriteFramesRefresh111010401:[function(e,t,n){"use strict";cc._RF.push(t,"4ffb2iALhZJu6pBwMcObkNj","ParticleSystemSpriteFramesRefresh111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,r.menu),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),a([s,c("game/\u7c92\u5b50\u8282\u70b9\uff0c\u52a8\u6001\u66ff\u6362\u8d34\u56fe")],t)}(slot.ParticleSystemSpriteFramesRefresh);n.default=l,cc._RF.pop()},{}],ReplaceSkeletonTex:[function(e,t,n){"use strict";cc._RF.push(t,"e7f20PjdZpDDq4/qbm0zgwN","ReplaceSkeletonTex");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,r=(i.property,function(){function e(){}return e.replaceNewAniTex=function(e,t,n,o,i){var a=this;void 0===i&&(i=slot.GData.bundleName),e.enabled=!1,e.setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.REALTIME),game.ResLoader.getInstance().loadRes(t,cc.Texture2D,null,function(i,r){if(!i){var s=t.split("/");r.name=s[s.length-1],a.changeSkin(e,r)}e.setAnimation(0,n,o),e.enabled=!0},i)},e.changeSkin=function(e,t){if(e.attachUtil._skeleton.skin)for(var n=0,o=e.attachUtil._skeleton.skin.attachments;n<o.length;n++){var i=o[n];for(var a in i){var r=i[a];this.updateRegion(r,t)}}if(e.attachUtil._skeleton.slots)for(var s=0;s<e.attachUtil._skeleton.slots.length;s++)r=e.attachUtil._skeleton.slots[s].getAttachment(),this.updateRegion(r,t)},e.updateRegion=function(e,t){if(e instanceof sp.spine.RegionAttachment&&e.region.page.name.split(".")[0]===t.name){var n=new sp.SkeletonTexture;n.setRealTexture(t);var o=new sp.spine.TextureAtlasPage;o.name=t.name,o.uWrap=sp.spine.TextureWrap.ClampToEdge,o.vWrap=sp.spine.TextureWrap.ClampToEdge,o.texture=n,o.texture.setWraps(o.uWrap,o.vWrap),o.width=t.width,o.height=t.height;var i=new sp.spine.TextureAtlasRegion;i.page=o,i.width=t.width,i.height=t.height,i.originalWidth=t.width,i.originalHeight=t.height,i.rotate=e.region.rotate,i.u=e.region.u,i.v=e.region.v,i.u2=e.region.u2,i.v2=e.region.v2,i.texture=n,e.region=i,e.setRegion(i),e.updateOffset()}},o([a],e)}());n.default=r,cc._RF.pop()},{}],ShakeScene111010401:[function(e,t,n){"use strict";cc._RF.push(t,"b4985yHXclI6bCNRyNNxJ+O","ShakeScene111010401");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,r=(i.property,function(){function e(){this.shakeNode=null,this.shakeTimes=0,this.originPos=null,this.sceenScale=null}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return this.instance||(this.instance=new t,window.ShakeScene111010401=this),this.instance},enumerable:!1,configurable:!0}),e.prototype.init=function(e,t){this.originPos=e,this.shakeNode=t,this.sceenScale=t.scale},e.prototype.updateShake=function(e){e.scale!=this.sceenScale&&(this.sceenScale=e.scale)},e.prototype.startShakeScene=function(e){e=e||1,cc.Tween.stopAllByTarget(this.shakeNode),this.shakeTimes=e;var t=this.shakeNode.getComponent(cc.Widget),n=this.originPos;t&&(t.enabled=!1),this.shakeNode.scale=1*this.sceenScale,this.shakeNode.position=n,cc.tween(this.shakeNode).to(.05,{position:cc.v3(n.x,n.y-4)}).to(.06,{position:cc.v3(n.x,n.y+3.5)}).to(.07,{position:cc.v3(n.x,n.y-3)}).to(.08,{position:cc.v3(n.x,n.y+2.5)}).to(.09,{position:cc.v3(n.x,n.y-2)}).to(.1,{position:cc.v3(n.x,n.y+1)}).to(.11,{position:cc.v3(n.x-1,n.y)}).to(.12,{position:n}).call(function(){t&&(t.enabled=!0)}).start()},t=o([a],e)}());n.default=r,cc._RF.pop()},{}],SpinSlotViewExtend111010401:[function(e,t,n){"use strict";cc._RF.push(t,"32be0vc0edONqUu4Uh58X3x","SpinSlotViewExtend111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=e("../common/GameEventName111010401"),r=e("../ui/GameUILogic111010401"),s=e("../ui/SymAboveExplosions111010401"),c=function(e){function t(){var t=e.call(this)||this;return t.bTextIdle=!1,t.belowFrame=null,t.aboveFrame=null,t.wildBelowFrame=null,t.wildAboveFrame=null,t.scatterBelowFrame=null,t.scatterAboveFrame=null,t._slotFrameAniView=null,t.isBlur=!0,t.isFade=!0,t.isFadeMask=!1,t}return i(t,e),t.prototype.onPlayAnimation=function(){},t.prototype.onDataOrStageChange=function(){e.prototype.onDataOrStageChange.call(this),this.removeScatterAboveFrame(),this.removeScatterBelowFrame()},t.prototype.onRollStartTemp=function(){var e=this;this.checkWild()&&(this.bTextIdle=!1,this.setAnimation(slot.JTGLoaderAssetType.Skeleton,"exit",!1,function(){e.bTextIdle||e.setAnimation(slot.JTGLoaderAssetType.Skeleton,"idle",!0)}))},t.prototype.onRollStopTemp=function(e){var t=this;if(this.checkWild())e?this.setAnimation(slot.JTGLoaderAssetType.Skeleton,"idle",!0):(this.setAnimation(slot.JTGLoaderAssetType.Skeleton,"spawn",!1,function(){t.setAnimation(slot.JTGLoaderAssetType.Skeleton,"idle",!0)}),slot.SpinManager.instance.isInTurbo||r.default.instance.bImmediately||slot.SoundMger.instance.playEffect("Wild_Appear"));else if(this.data==a.SymbolID111010401.SYMBOL_SCATTER){this.setScatterAboveFrame(),this.setScatterBelowFrame(),this.setAnimation(slot.JTGLoaderAssetType.Skeleton,"idle",!0),e||r.default.instance.playScatterLandEffect();var n=this.scatterAboveFrame,o=this.scatterBelowFrame;cc.tween(this.skinLoader).to(.15,{scale:this.getReelScale(1.25),y:20}).call(function(){if(n){n.active=!0;var e=n.getChildByName("ani1").getComponent(sp.Skeleton),t=n.getChildByName("ani2").getComponent(sp.Skeleton);e.setAnimation(0,"start_top",!1),t.setAnimation(0,"start_base",!1)}o&&(o.active=!0)}).to(.2,{scale:this.getReelScale(1),y:0}).start()}else this.setAnimation(slot.JTGLoaderAssetType.Skeleton,"spawn",!1)},t.prototype.onDropEnd=function(){e.prototype.onDropEnd.call(this),this.onRollStopTemp(!1),this.playDropEndEffect()},t.prototype.playDropEndEffect=function(){r.default.instance.playDropEffect(this)},t.prototype.scatterWaitAni=function(e){void 0===e&&(e=!1),this.setAnimation(slot.JTGLoaderAssetType.Skeleton,"idle",!0),cc.tween(this.skinLoader).call(function(){e&&slot.SoundMger.instance.playEffect("Scatter_Tempo")}).to(.15,{scale:this.getReelScale(1.1)}).to(.2,{scale:this.getReelScale(1)}).delay(.6).union().repeat(3).start()},t.prototype.scatterWinAni=function(){var e=this;this.setAnimation(slot.JTGLoaderAssetType.Skeleton,"win",!1,function(){e.setAnimation(slot.JTGLoaderAssetType.Skeleton,"win_idle",!0)})},t.prototype.wildSeqStart=function(){var e=this;this.setAnimation(slot.JTGLoaderAssetType.Skeleton,"seq_start",!1,function(){e.setAnimation(slot.JTGLoaderAssetType.Skeleton,"seq_idle",!0)})},t.prototype.wildIdle=function(){var e=this;this.bTextIdle=!0,this.setAnimation(slot.JTGLoaderAssetType.Skeleton,"seq_exit",!1,function(){e.wildInitIdle()})},t.prototype.wildInitIdle=function(){this.bTextIdle=!0,this.setAnimation(slot.JTGLoaderAssetType.Skeleton,"idle_w_txt",!0)},t.prototype.wildLightActive=function(e){var t=this;this.setWildAboveFrame(),this.setWildBelowFrame(),this.wildBelowFrame.active=!0;var n=this.wildBelowFrame.getChildByName("ani");if(cc.Tween.stopAllByTarget(n),cc.tween(n).to(e?.3:.133,{opacity:e?255:0}).call(function(){!e&&t.removeWildBelowFrame()}).start(),e){this.wildAboveFrame.active=!0;var o=this.wildAboveFrame.getChildByName("ani");cc.Tween.stopAllByTarget(o),o.opacity=255,cc.tween(o).to(.133,{opacity:0}).call(function(){t.removeWildAboveFrame()}).start()}},t.prototype.playWinAni=function(){var e=this;this.setBelowFrame(),cc.Tween.stopAllByTarget(this.skinLoader),this.skinLoader.scale=this.getReelScale(1),this.skinLoader.opacity=255,cc.tween(this.skinLoader).to(.333,{scale:this.getReelScale(1.15)}).to(.23,{scale:this.getReelScale(1.07)}).call(function(){e.setAnimation(slot.JTGLoaderAssetType.Skeleton,e.checkWild()?"idle_w_txt":"win",!1,function(){}),e.setAboveFrame()}).delay(.2).to(.2,{opacity:0}).start()},t.prototype.checkWild=function(){return this.data==a.SymbolID111010401.SYMBOL_WILD||this.data==a.SymbolID111010401.SYMBOL_WILD_MIRROR},t.prototype.getReelScale=function(e){return slot.SpinElementManager.instance.getSpinElementConfig(this.data).normalImageScale*e},t.prototype.onStopAnimation=function(){this.removeAboveFrame(),this.removeBelowFrame(),this.removeWildAboveFrame(),this.removeWildBelowFrame(),this.removeScatterAboveFrame(),cc.Tween.stopAllByTarget(this.skinLoader),this.skinLoader.scale=this.getReelScale(1),this.skinLoader.opacity=255},t.prototype.setBelowFrame=function(){var e=this,t=this.getBelowFrame();t.parent=this,t.zIndex=-1,t.name="belowFrame",t.position=cc.v3(0,0);var n=t.getComponent(sp.Skeleton);n.setAnimation(0,"wh_zhongjiangxiaochu",!1),n.setCompleteListener(function(){n.setCompleteListener(null),e.removeBelowFrame()})},t.prototype.getBelowFrame=function(){this.removeBelowFrame(),this.belowFrame||(this.belowFrame=cc.instantiate(r.default.instance.getPrefabResByName("symbolBelowExplosions"))),this.belowFrame.active=!0;var e=this.belowFrame.getComponent(slot.AnimationExtend);return e||(e=this.belowFrame.addComponent(slot.AnimationExtend)),this.belowFrame},t.prototype.removeBelowFrame=function(){this.belowFrame&&(this.belowFrame.active=!1,this.belowFrame.removeFromParent(),this.belowFrame=null)},t.prototype.setAboveFrame=function(){var e=this,t=this.getAboveFrame();t.parent=this,t.zIndex=1,t.name="aboveFrame",t.position=cc.v3(0,0),t.getComponent(s.default).setAni(this.checkWild()?a.SymbolID111010401.SYMBOL_WILD:this.data,slot.Handler.create(this,function(){e.removeAboveFrame()}))},t.prototype.getAboveFrame=function(){this.removeAboveFrame(),this.aboveFrame||(this.aboveFrame=cc.instantiate(r.default.instance.getPrefabResByName("symbolAboveExplosions"))),this.aboveFrame.active=!0;var e=this.aboveFrame.getComponent(slot.AnimationExtend);return e||(e=this.aboveFrame.addComponent(slot.AnimationExtend)),this.aboveFrame},t.prototype.removeAboveFrame=function(){this.aboveFrame&&(this.aboveFrame.active=!1,this.aboveFrame.removeFromParent(),this.aboveFrame=null,this.skinLoader.spriteNode.opacity=255)},t.prototype.setWildBelowFrame=function(){var e=this.getWildBelowFrame();e.parent=this,e.zIndex=-1,e.name="wildBelowFrame",e.position=cc.v3(0,0),e.active=!1},t.prototype.getWildBelowFrame=function(){this.removeWildBelowFrame(),this.wildBelowFrame||(this.wildBelowFrame=cc.instantiate(r.default.instance.getPrefabResByName("wildBelowExplosions"))),this.wildBelowFrame.active=!0;var e=this.wildBelowFrame.getComponent(slot.AnimationExtend);return e||(e=this.wildBelowFrame.addComponent(slot.AnimationExtend)),this.wildBelowFrame},t.prototype.removeWildBelowFrame=function(){this.wildBelowFrame&&(this.wildBelowFrame.active=!1,this.wildBelowFrame.removeFromParent(),this.wildBelowFrame=null)},t.prototype.setWildAboveFrame=function(){var e=this.getWildAboveFrame();e.parent=this,e.zIndex=1,e.name="wildAboveFrame",e.position=cc.v3(0,0),e.active=!1},t.prototype.getWildAboveFrame=function(){this.removeWildAboveFrame(),this.wildAboveFrame||(this.wildAboveFrame=cc.instantiate(r.default.instance.getPrefabResByName("wildAboveExplosions"))),this.wildAboveFrame.active=!0;var e=this.wildAboveFrame.getComponent(slot.AnimationExtend);return e||(e=this.wildAboveFrame.addComponent(slot.AnimationExtend)),this.wildAboveFrame},t.prototype.removeWildAboveFrame=function(){this.wildAboveFrame&&(this.wildAboveFrame.active=!1,this.wildAboveFrame.removeFromParent(),this.wildAboveFrame=null,this.skinLoader.spriteNode.opacity=255)},t.prototype.setScatterBelowFrame=function(){var e=this.getScatterBelowFrame();e.parent=this,e.zIndex=-1,e.name="scatterBelowFrame",e.position=cc.v3(0,0),e.active=!1},t.prototype.getScatterBelowFrame=function(){this.removeScatterBelowFrame(),this.scatterBelowFrame=cc.instantiate(r.default.instance.getPrefabResByName("scatterBelowExplosions")),this.scatterBelowFrame.active=!0;var e=this.scatterBelowFrame.getComponent(slot.AnimationExtend);return e||(e=this.scatterBelowFrame.addComponent(slot.AnimationExtend)),this.scatterBelowFrame},t.prototype.removeScatterBelowFrame=function(){this.scatterBelowFrame&&(this.scatterBelowFrame.active=!1,this.scatterBelowFrame.removeFromParent(),this.scatterBelowFrame=null)},t.prototype.setScatterAboveFrame=function(){var e=this.getScatterAboveFrame();e.parent=this,e.zIndex=1,e.name="scatterAboveFrame",e.position=cc.v3(0,0),e.active=!1},t.prototype.getScatterAboveFrame=function(){this.removeScatterAboveFrame(),this.scatterAboveFrame=cc.instantiate(r.default.instance.getPrefabResByName("scatterAboveExplosions")),this.scatterAboveFrame.active=!0;var e=this.scatterAboveFrame.getComponent(slot.AnimationExtend);return e||(e=this.scatterAboveFrame.addComponent(slot.AnimationExtend)),this.scatterAboveFrame},t.prototype.removeScatterAboveFrame=function(){this.scatterAboveFrame&&(this.scatterAboveFrame.active=!1,this.scatterAboveFrame.removeFromParent(),this.scatterAboveFrame=null,this.skinLoader.spriteNode.opacity=255)},t.prototype.showFrameAniView=function(e){void 0===e&&(e=!1),this._slotFrameAniView||(this._slotFrameAniView=this._getSlotFrameAniView(e)),this._slotFrameAniView.active=!0,this.addEffectNode(this._slotFrameAniView,!0)},t.prototype._getSlotFrameAniView=function(){return this._slotFrameAniView?this._slotFrameAniView:(this._slotFrameAniView=new cc.Node,this._slotFrameAniView)},t.prototype.recoverSlotFrameAniViewSpin=function(){this._slotFrameAniView&&(this._slotFrameAniView.destroy(),this._slotFrameAniView.active=!1,this._slotFrameAniView=null)},t}(e("./JTAnomalyRenders/JTAnomalyRenders").JTAnomalyRenders);n.default=c,cc._RF.pop()},{"../common/GameEventName111010401":"GameEventName111010401","../ui/GameUILogic111010401":"GameUILogic111010401","../ui/SymAboveExplosions111010401":"SymAboveExplosions111010401","./JTAnomalyRenders/JTAnomalyRenders":"JTAnomalyRenders"}],SubQueueManager111010401:[function(e,t,n){"use strict";cc._RF.push(t,"2aac1HMdxNKhoxUgz2rAc0E","SubQueueManager111010401"),Object.defineProperty(n,"__esModule",{value:!0}),n.SubQueueManager111010401=void 0;var o=function(){function e(){this._queue=[],this.continueHandler=slot.Handler.create(this,this.execute,null,!1)}return e.prototype.reset=function(){this._queue=[]},e.prototype.pushToQueue=function(e){this._queue.push(e)},e.prototype.execute=function(){return!(this._queue.length<=0||(this._queue.shift().runWith(this.continueHandler),0))},e}();n.SubQueueManager111010401=o,window.SubQueueManager=this,cc._RF.pop()},{}],SymAboveExplosions111010401:[function(e,t,n){"use strict";cc._RF.push(t,"e7f3e0cDitJ2IspS3KQtPQG","SymAboveExplosions111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=r.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aniList=[],t.ani1=null,t.ani2=null,t}return i(t,e),t.prototype.onLoad=function(){window.SymAboveExplosions111010401=this},t.prototype.setAni=function(e,t){var n=this.aniList[0],o=this.aniList[e],i=0;o&&(i=.56,this.playAni(this.ani1,o,"ani1",i),this.playAni(this.ani2,n,"ani2",i)),this.scheduleOnce(function(){t&&t.run()},i)},t.prototype.playAni=function(e,t,n,o){void 0===n&&(n="animation");var i=t.getSpriteFrames();i.sort(function(e,t){var n=e.name,o=t.name,i=0,a=0;if(n.indexOf("_")>=0){var r=n.split("_");i=Number(r[r.length-1])}else i=Number(n);return o.indexOf("_")>=0?(r=o.split("_"),a=Number(r[r.length-1])):a=Number(o),i-a});var a=Math.ceil(i.length/o),r=cc.AnimationClip.createWithSpriteFrames(i,a);r.name=n,r.wrapMode=cc.WrapMode.Normal,e.addClip(r);var s=e.getAnimationState(n);s.clip.sample=a,s.clip.wrapMode=cc.WrapMode.Normal,e.resume(n),e.play(n)},a([c(cc.SpriteAtlas)],t.prototype,"aniList",void 0),a([c(cc.Animation)],t.prototype,"ani1",void 0),a([c(cc.Animation)],t.prototype,"ani2",void 0),a([s,l("game/ts/ui/SymAboveExplosions111010401")],t)}(cc.Component);n.default=p,cc._RF.pop()},{}],Util111010401:[function(e,t,n){"use strict";cc._RF.push(t,"c509bL2kdVF4pCmJKyanWRp","Util111010401"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.rnd=function(e,t){var n=(t-e+1)*Math.random()+e;return Math.floor(n)},e.getTargetPos=function(e,t){var n=e.getBoundingBoxToWorld(),o=cc.v3(n.x+n.width/2,n.y+n.height/2);return t.convertToNodeSpaceAR(o)},Object.defineProperty(e,"isMobile",{get:function(){var e=slot.GData.getParameter("main").isMobileGameControlPrefab,t=cc.sys.isMobile;return e&&(t=!0),t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isLandscape",{get:function(){var e=slot.GData.getParameter("main"),t=e.isalwaysLandScape,n=e.isalwaysPortrait;return!!t||!n&&slot.LayoutEx.isLandscape},enumerable:!1,configurable:!0}),e.getAnimationTimeByName=function(e,t){var n=t,o=0;if(null==n)return console.log("[ERROR SPINE ANIMATION] \u65e0\u6cd5\u83b7\u53d6\u83b7\u53d6\u52a8\u753b\u72b6\u6001>-----"+e),o;var i=n.data.skeletonData.animations;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var r=i[a];r.name==e&&(o=r.duration)}return o},Object.defineProperty(e,"bMoneyEnough",{get:function(){return slot.SpinManager.instance._isMoneyEnough()},enumerable:!1,configurable:!0}),e.getDistance=function(e,t){var n=cc.v2(e.x-t.x,e.y-t.y);return Math.sqrt(n.x*n.x+n.y*n.y)},e.getAngle=function(e,t){var n=t.x-e.x,o=t.y-e.y;return-cc.v2(n,o).signAngle(cc.v2(1,0))/Math.PI*180},e}();n.default=o,window.Util111010401=o,cc._RF.pop()},{}],WinAniManager111010401:[function(e,t,n){"use strict";cc._RF.push(t,"b8b65rAsMJNT74f1qvKrhTL","WinAniManager111010401");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.playWinStart=function(){slot.SoundMger.instance.playEffect("Prize_Big")},t.prototype.onPlayFinalAnimation=function(){this.playQuan()},t.prototype.onCoinIncreaseEnd=function(){this.playQuan()},t.prototype.playQuan=function(){slot.SoundMger.instance.playEffect("Prize_Big_end"),slot.SoundMger.instance.stopEffect("Prize_Big")},t.prototype.playFadeOut=function(e){e.run()},a([s],t)}(slot.WinAniManager));n.default=c,cc._RF.pop()},{}]},{},["BonusEndPop111010401","BonusGameControl111010401","BonusGameLogic111010401","BonusItemControl111010401","BonusStartPop111010401","BonusTimesItem111010401","CustomButton111010401","GameEventName111010401","LanguageSpInfoBase111010401","MultiPSRandomRefresh111010401","NumAtlasLabel111010401","ParticleSystemSpriteFramesRefresh111010401","ReplaceSkeletonTex","ShakeScene111010401","SubQueueManager111010401","WinAniManager111010401","GameBg111010401","LanguageInfo111010401","Main111010401","GameLayer111010401","JTAnomalyRenders","JTCollectTask111010401","JTLogicFactroy111010401","LanguangeCompSlot111010401","SpinSlotViewExtend111010401","JTChildManager111010401","JTLayerManager111010401","Banner111010401","GameUIControl111010401","GameUILogic111010401","SymAboveExplosions111010401","DataUtil111010401","Util111010401"]);